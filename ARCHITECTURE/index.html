
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="å¤šå¹³å°ç›‘æ§ç­¾åˆ° Â· å¼€æ’­æé†’ Â· å¤šæ¸ é“æ¨é€ â€” ä½¿ç”¨æŒ‡å—ä¸äºŒæ¬¡å¼€å‘">
      
      
        <meta name="author" content="FY">
      
      
        <link rel="canonical" href="https://666fy666.github.io/WebMoniter/ARCHITECTURE/">
      
      
        <link rel="prev" href="../guides/push-channels/">
      
      
        <link rel="next" href="../SECONDARY_DEVELOPMENT/">
      
      
        
      
      
      <link rel="icon" href="../assets/favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>æ¶æ„æ¦‚è§ˆ - WebMoniter æ–‡æ¡£</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#web" class="md-skip">
          è·³è½¬è‡³
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
    <a href=".." title="WebMoniter æ–‡æ¡£" class="md-header__button md-logo" aria-label="WebMoniter æ–‡æ¡£" data-md-component="logo">
      
  <img src="../assets/favicon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WebMoniter æ–‡æ¡£
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              æ¶æ„æ¦‚è§ˆ
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="æ·±è‰²æ¨¡å¼"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="æ·±è‰²æ¨¡å¼" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="æµ…è‰²æ¨¡å¼"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="æµ…è‰²æ¨¡å¼" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="æŸ¥æ‰¾">
        
        <button type="reset" class="md-search__icon md-icon" title="æ¸…ç©ºå½“å‰å†…å®¹" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/666fy666/WebMoniter" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    666fy666/WebMoniter
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="æ ‡ç­¾" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  é¦–é¡µ

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../installation/" class="md-tabs__link">
          
  
  
  å¿«é€Ÿå¼€å§‹

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../guides/config/" class="md-tabs__link">
          
  
  
  ä½¿ç”¨æŒ‡å—

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  äºŒæ¬¡å¼€å‘

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../faq/" class="md-tabs__link">
          
  
  
  å¸®åŠ©ä¸æ”¯æŒ

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="å¯¼èˆªæ " data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="WebMoniter æ–‡æ¡£" class="md-nav__button md-logo" aria-label="WebMoniter æ–‡æ¡£" data-md-component="logo">
      
  <img src="../assets/favicon.svg" alt="logo">

    </a>
    WebMoniter æ–‡æ¡£
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/666fy666/WebMoniter" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    666fy666/WebMoniter
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    é¦–é¡µ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    å¿«é€Ÿå¼€å§‹
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    å¿«é€Ÿå¼€å§‹
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    å®‰è£…ä¸è¿è¡Œ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../QINGLONG/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    é’é¾™é¢æ¿éƒ¨ç½²
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ä½¿ç”¨æŒ‡å—
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    ä½¿ç”¨æŒ‡å—
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    é…ç½®ä¸è®¾ç½®
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    é…ç½®ä¸è®¾ç½®
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    é…ç½®è¯´æ˜
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/web-ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Web ç®¡ç†ç•Œé¢
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/ai-assistant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI åŠ©æ‰‹
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ä»»åŠ¡ç®¡ç†
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    ä»»åŠ¡ç®¡ç†
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ä»»åŠ¡æ¦‚è§ˆ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/tasks/monitors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ç›‘æ§ä»»åŠ¡è¯¦è§£
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/tasks/checkin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    å®šæ—¶ä»»åŠ¡è¯¦è§£
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    æ¨é€ä¸é€šçŸ¥
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    æ¨é€ä¸é€šçŸ¥
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/push-channels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    æ¨é€é€šé“é…ç½®
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    äºŒæ¬¡å¼€å‘
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    äºŒæ¬¡å¼€å‘
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    æ¶æ„æ¦‚è§ˆ
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    æ¶æ„æ¦‚è§ˆ
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ğŸ“‹ ç›®å½•
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        é¡¹ç›®æ¦‚è¿°
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="é¡¹ç›®æ¦‚è¿°">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ ¸å¿ƒç‰¹æ€§
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ•´ä½“æ¶æ„
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ•´ä½“æ¶æ„">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¶æ„å›¾
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç³»ç»Ÿå¯åŠ¨æµç¨‹
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ ¸å¿ƒæ¨¡å—è¯¦è§£
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ ¸å¿ƒæ¨¡å—è¯¦è§£">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-mainpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. main.py - ä¸»å…¥å£æ¨¡å—
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-srcconfigpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. src/config.py - é…ç½®ç®¡ç†æ¨¡å—
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-srcmonitorpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. src/monitor.py - ç›‘æ§åŸºç±»
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-srcschedulerpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. src/scheduler.py - ä»»åŠ¡è°ƒåº¦å™¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-srcdatabasepy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. src/database.py - æ•°æ®åº“æ¨¡å—
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-srcjob_registrypy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. src/job_registry.py - ä»»åŠ¡æ³¨å†Œè¡¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-srcconfig_db_syncpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. src/config_db_sync.py - é…ç½®ä¸æ•°æ®åº“åŒæ­¥
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-srcconfig_watcherpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. src/config_watcher.py - é…ç½®ç›‘æ§å™¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-srccookie_cachepy-cookie" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. src/cookie_cache.py - Cookieç¼“å­˜ç®¡ç†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-srcpush_channel-" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. src/push_channel/ - æ¨é€é€šé“æ¨¡å—
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11-srcweb_serverpy-web" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. src/web_server.py - WebæœåŠ¡å™¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-srclog_managerpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        12. src/log_manager.py - æ—¥å¿—ç®¡ç†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-srcai_assistant-ai" class="md-nav__link">
    <span class="md-ellipsis">
      
        13. src/ai_assistant/ - AI åŠ©æ‰‹æ¨¡å—
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-srcversionpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        14. src/version.py - ç‰ˆæœ¬ä¿¡æ¯æ¨¡å—
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ•°æ®æµè®¾è®¡
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ•°æ®æµè®¾è®¡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç›‘æ§ä»»åŠ¡æ‰§è¡Œæµç¨‹
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        å®šæ—¶ä»»åŠ¡æ‰§è¡Œæµç¨‹
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        é…ç½®çƒ­é‡è½½æµç¨‹
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ‰©å±•æœºåˆ¶
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ‰©å±•æœºåˆ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ·»åŠ æ–°ç›‘æ§å¹³å°
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ·»åŠ æ–°å®šæ—¶ä»»åŠ¡
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ·»åŠ æ–°æ¨é€é€šé“
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        æŠ€æœ¯æ ˆ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æŠ€æœ¯æ ˆ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ ¸å¿ƒä¾èµ–
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¶æ„æ¨¡å¼
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç›®å½•ç»“æ„
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        å…³é”®è®¾è®¡æ¨¡å¼
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å…³é”®è®¾è®¡æ¨¡å¼">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. æ’ä»¶åŒ–æ¶æ„
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. å·¥å‚æ¨¡å¼
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. å•ä¾‹æ¨¡å¼
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. è§‚å¯Ÿè€…æ¨¡å¼
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. æ¨¡æ¿æ–¹æ³•æ¨¡å¼
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        é…ç½®ç®¡ç†
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="é…ç½®ç®¡ç†">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      
        é…ç½®æ–‡ä»¶ç»“æ„
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      
        é…ç½®åŠ è½½æµç¨‹
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      
        é…ç½®çƒ­é‡è½½
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ•°æ®åº“è®¾è®¡
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ•°æ®åº“è®¾è®¡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ•°æ®åº“é€‰æ‹©
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¡¨ç»“æ„
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿æ¥ç®¡ç†
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¨é€é€šé“æ¶æ„
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ¨é€é€šé“æ¶æ„">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç»Ÿä¸€æ¨é€æ¥å£
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¨é€ç®¡ç†å™¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¨é€æµç¨‹
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#web_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        WebæœåŠ¡æ¶æ„
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WebæœåŠ¡æ¶æ„">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      
        æŠ€æœ¯æ ˆ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      
        è·¯ç”±è®¾è®¡
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      
        è®¤è¯æœºåˆ¶
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        APIè®¾è®¡
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ€»ç»“
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SECONDARY_DEVELOPMENT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    äºŒæ¬¡å¼€å‘æŒ‡å—
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API å‚è€ƒ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    å¸®åŠ©ä¸æ”¯æŒ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    å¸®åŠ©ä¸æ”¯æŒ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    å¸¸è§é—®é¢˜
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ğŸ“‹ ç›®å½•
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        é¡¹ç›®æ¦‚è¿°
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="é¡¹ç›®æ¦‚è¿°">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ ¸å¿ƒç‰¹æ€§
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ•´ä½“æ¶æ„
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ•´ä½“æ¶æ„">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¶æ„å›¾
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç³»ç»Ÿå¯åŠ¨æµç¨‹
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ ¸å¿ƒæ¨¡å—è¯¦è§£
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ ¸å¿ƒæ¨¡å—è¯¦è§£">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-mainpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. main.py - ä¸»å…¥å£æ¨¡å—
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-srcconfigpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. src/config.py - é…ç½®ç®¡ç†æ¨¡å—
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-srcmonitorpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. src/monitor.py - ç›‘æ§åŸºç±»
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-srcschedulerpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. src/scheduler.py - ä»»åŠ¡è°ƒåº¦å™¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-srcdatabasepy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. src/database.py - æ•°æ®åº“æ¨¡å—
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-srcjob_registrypy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. src/job_registry.py - ä»»åŠ¡æ³¨å†Œè¡¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-srcconfig_db_syncpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. src/config_db_sync.py - é…ç½®ä¸æ•°æ®åº“åŒæ­¥
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-srcconfig_watcherpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. src/config_watcher.py - é…ç½®ç›‘æ§å™¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-srccookie_cachepy-cookie" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. src/cookie_cache.py - Cookieç¼“å­˜ç®¡ç†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-srcpush_channel-" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. src/push_channel/ - æ¨é€é€šé“æ¨¡å—
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11-srcweb_serverpy-web" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. src/web_server.py - WebæœåŠ¡å™¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-srclog_managerpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        12. src/log_manager.py - æ—¥å¿—ç®¡ç†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-srcai_assistant-ai" class="md-nav__link">
    <span class="md-ellipsis">
      
        13. src/ai_assistant/ - AI åŠ©æ‰‹æ¨¡å—
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-srcversionpy-" class="md-nav__link">
    <span class="md-ellipsis">
      
        14. src/version.py - ç‰ˆæœ¬ä¿¡æ¯æ¨¡å—
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ•°æ®æµè®¾è®¡
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ•°æ®æµè®¾è®¡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç›‘æ§ä»»åŠ¡æ‰§è¡Œæµç¨‹
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        å®šæ—¶ä»»åŠ¡æ‰§è¡Œæµç¨‹
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        é…ç½®çƒ­é‡è½½æµç¨‹
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ‰©å±•æœºåˆ¶
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ‰©å±•æœºåˆ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ·»åŠ æ–°ç›‘æ§å¹³å°
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ·»åŠ æ–°å®šæ—¶ä»»åŠ¡
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ·»åŠ æ–°æ¨é€é€šé“
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        æŠ€æœ¯æ ˆ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æŠ€æœ¯æ ˆ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ ¸å¿ƒä¾èµ–
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¶æ„æ¨¡å¼
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç›®å½•ç»“æ„
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        å…³é”®è®¾è®¡æ¨¡å¼
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å…³é”®è®¾è®¡æ¨¡å¼">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. æ’ä»¶åŒ–æ¶æ„
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. å·¥å‚æ¨¡å¼
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. å•ä¾‹æ¨¡å¼
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. è§‚å¯Ÿè€…æ¨¡å¼
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. æ¨¡æ¿æ–¹æ³•æ¨¡å¼
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        é…ç½®ç®¡ç†
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="é…ç½®ç®¡ç†">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      
        é…ç½®æ–‡ä»¶ç»“æ„
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      
        é…ç½®åŠ è½½æµç¨‹
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      
        é…ç½®çƒ­é‡è½½
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ•°æ®åº“è®¾è®¡
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ•°æ®åº“è®¾è®¡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ•°æ®åº“é€‰æ‹©
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¡¨ç»“æ„
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿æ¥ç®¡ç†
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¨é€é€šé“æ¶æ„
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ¨é€é€šé“æ¶æ„">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç»Ÿä¸€æ¨é€æ¥å£
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¨é€ç®¡ç†å™¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¨é€æµç¨‹
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#web_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        WebæœåŠ¡æ¶æ„
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WebæœåŠ¡æ¶æ„">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      
        æŠ€æœ¯æ ˆ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      
        è·¯ç”±è®¾è®¡
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      
        è®¤è¯æœºåˆ¶
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        APIè®¾è®¡
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ€»ç»“
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="web">Webä»»åŠ¡ç³»ç»Ÿ é¡¹ç›®æ¶æ„æ–‡æ¡£<a class="headerlink" href="#web" title="Permanent link">&para;</a></h1>
<h2 id="_1">ğŸ“‹ ç›®å½•<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#é¡¹ç›®æ¦‚è¿°">é¡¹ç›®æ¦‚è¿°</a></li>
<li><a href="#æ•´ä½“æ¶æ„">æ•´ä½“æ¶æ„</a></li>
<li><a href="#æ ¸å¿ƒæ¨¡å—è¯¦è§£">æ ¸å¿ƒæ¨¡å—è¯¦è§£</a></li>
<li><a href="#æ•°æ®æµè®¾è®¡">æ•°æ®æµè®¾è®¡</a></li>
<li><a href="#æ‰©å±•æœºåˆ¶">æ‰©å±•æœºåˆ¶</a></li>
<li><a href="#æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</a></li>
<li><a href="#ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</a></li>
<li><a href="#å…³é”®è®¾è®¡æ¨¡å¼">å…³é”®è®¾è®¡æ¨¡å¼</a></li>
<li><a href="#é…ç½®ç®¡ç†">é…ç½®ç®¡ç†</a></li>
<li><a href="#æ•°æ®åº“è®¾è®¡">æ•°æ®åº“è®¾è®¡</a></li>
<li><a href="#æ¨é€é€šé“æ¶æ„">æ¨é€é€šé“æ¶æ„</a></li>
<li><a href="#webæœåŠ¡æ¶æ„">WebæœåŠ¡æ¶æ„</a></li>
</ul>
<hr />
<h2 id="_2">é¡¹ç›®æ¦‚è¿°<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>Webä»»åŠ¡ç³»ç»Ÿï¼ˆé¡¹ç›®ä»£å· WebMoniterï¼‰æ˜¯ä¸€ä¸ªåŸºäº Python çš„<strong>å¤šå¹³å°ä»»åŠ¡ç³»ç»Ÿ</strong>ï¼Œé‡‡ç”¨å¼‚æ­¥IOæ¶æ„ï¼Œæ”¯æŒï¼š</p>
<ul>
<li><strong>å¤šå¹³å°ç›‘æ§</strong>ï¼šè™ç‰™ç›´æ’­ã€å¾®åšç­‰å¹³å°çš„å®æ—¶ç›‘æ§</li>
<li><strong>å®šæ—¶ä»»åŠ¡</strong>ï¼šiKuuuç­¾åˆ°ã€ç™¾åº¦è´´å§ç­¾åˆ°ã€å¾®åšè¶…è¯ç­¾åˆ°ç­‰</li>
<li><strong>å¤šæ¸ é“æ¨é€</strong>ï¼šæ”¯æŒ15+ç§æ¨é€é€šé“ï¼ˆä¼ä¸šå¾®ä¿¡ã€é’‰é’‰ã€Telegramã€Barkç­‰ï¼‰</li>
<li><strong>é…ç½®çƒ­é‡è½½</strong>ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶æ— éœ€é‡å¯ï¼Œ5ç§’å†…è‡ªåŠ¨ç”Ÿæ•ˆ</li>
<li><strong>Webç®¡ç†ç•Œé¢</strong>ï¼šæä¾›å‹å¥½çš„Webç•Œé¢è¿›è¡Œé…ç½®ç®¡ç†å’Œæ•°æ®æŸ¥çœ‹</li>
<li><strong>AI åŠ©æ‰‹</strong>ï¼šRAG + LLM æ™ºèƒ½é—®ç­”ï¼Œæ”¯æŒé…ç½®ç”Ÿæˆã€æ—¥å¿—è¯Šæ–­ã€æ•°æ®æ´å¯ŸåŠå¯æ‰§è¡Œæ“ä½œï¼ˆå¼€å…³ç›‘æ§ã€é…ç½®åˆ—è¡¨å¢åˆ ï¼‰</li>
</ul>
<h3 id="_3">æ ¸å¿ƒç‰¹æ€§<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<ul>
<li>âœ… <strong>å¼‚æ­¥IOæ¶æ„</strong>ï¼šåŸºäº <code>asyncio</code> å’Œ <code>aiohttp</code>ï¼Œæ”¯æŒé«˜å¹¶å‘</li>
<li>âœ… <strong>ä»»åŠ¡è°ƒåº¦</strong>ï¼šåŸºäº <code>APScheduler</code> çš„çµæ´»ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ</li>
<li>âœ… <strong>æ’ä»¶åŒ–è®¾è®¡</strong>ï¼šç›‘æ§å’Œå®šæ—¶ä»»åŠ¡é‡‡ç”¨æ’ä»¶åŒ–æ¶æ„ï¼Œæ˜“äºæ‰©å±•</li>
<li>âœ… <strong>é…ç½®çƒ­é‡è½½</strong>ï¼šé…ç½®æ–‡ä»¶ä¿®æ”¹åè‡ªåŠ¨æ£€æµ‹å¹¶åº”ç”¨ï¼Œæ— éœ€é‡å¯</li>
<li>âœ… <strong>Cookieç®¡ç†</strong>ï¼šæ™ºèƒ½Cookieç¼“å­˜å’Œè¿‡æœŸæ£€æµ‹æœºåˆ¶</li>
<li>âœ… <strong>å…æ‰“æ‰°æ—¶æ®µ</strong>ï¼šæ”¯æŒé…ç½®å…æ‰“æ‰°æ—¶æ®µï¼Œé™é»˜è¿è¡Œç›‘æ§ä»»åŠ¡</li>
<li>âœ… <strong>ç‰ˆæœ¬æ›´æ–°æ£€æµ‹</strong>ï¼šè‡ªåŠ¨æ£€æµ‹ GitHub æ–°ç‰ˆæœ¬å¹¶åœ¨ Web ç•Œé¢æç¤ºæ›´æ–°</li>
<li>âœ… <strong>AI åŠ©æ‰‹</strong>ï¼šRAG æ£€ç´¢ + LLM å¯¹è¯ï¼Œæ”¯æŒé…ç½®ç”Ÿæˆã€æ—¥å¿—è¯Šæ–­ã€æ•°æ®æ´å¯Ÿã€å¯æ‰§è¡Œæ“ä½œ</li>
</ul>
<hr />
<h2 id="_4">æ•´ä½“æ¶æ„<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<h3 id="_5">æ¶æ„å›¾<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        main.py                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Web Server  â”‚  â”‚  Scheduler   â”‚  â”‚ Config Watcherâ”‚   â”‚
â”‚  â”‚  (FastAPI)   â”‚  â”‚ (APScheduler)â”‚  â”‚  (çƒ­é‡è½½)     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                 â”‚
          â”‚                  â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Job Registry                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ MONITOR_JOBS â”‚              â”‚  TASK_JOBS   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                             â”‚
          â”‚                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Monitors    â”‚              â”‚    Tasks     â”‚         â”‚
â”‚  â”‚  Huya/Weibo  â”‚              â”‚  Checkin/    â”‚         â”‚
â”‚  â”‚  Bilibili/   â”‚              â”‚  Tieba ç­‰    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                             â”‚
          â”‚                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Database   â”‚  â”‚ Push Manager â”‚  â”‚ Cookie Cache â”‚   â”‚
â”‚  â”‚  (SQLite)    â”‚  â”‚  (ç»Ÿä¸€æ¨é€)  â”‚  â”‚  (çŠ¶æ€ç®¡ç†)  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
<h3 id="_6">ç³»ç»Ÿå¯åŠ¨æµç¨‹<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>åˆå§‹åŒ–é˜¶æ®µ</strong></li>
<li>è®¾ç½®æ—¥å¿—ç³»ç»Ÿï¼šå…ˆ <code>setup_logging()</code>ï¼ˆä»…æ§åˆ¶å°ï¼›é TTY ç¯å¢ƒä¸è¾“å‡ºåˆ°æ§åˆ¶å°ï¼‰ï¼Œåˆ›å»º Web åº”ç”¨ä¸ Uvicorn æœåŠ¡å™¨ï¼ˆFastAPIï¼‰åï¼Œå†æŒ‚è½½ <code>main</code> æ–‡ä»¶æ—¥å¿— Handlerï¼ˆ<code>LogManager.setup_file_logging("main")</code>ï¼‰åˆ° root logger</li>
<li>Web æœåŠ¡é»˜è®¤ç«¯å£ 8866ï¼Œå¯é€šè¿‡ç¯å¢ƒå˜é‡ <code>PORT</code> è¦†ç›–</li>
<li>åŠ è½½é…ç½®æ–‡ä»¶ (<code>config.yml</code>)ï¼›å¤±è´¥åˆ™ <code>sys.exit(1)</code></li>
<li>è‹¥å¯ç”¨ AI åŠ©æ‰‹ï¼šæ„å»º RAG å‘é‡åº“ï¼ˆ<code>docs/*.md</code>ã€<code>README.md</code> â†’ Chromaï¼‰</li>
<li>
<p>é‡ç½® Cookie ç¼“å­˜ (<code>cookie_cache.reset_all()</code>)</p>
</li>
<li>
<p><strong>ä»»åŠ¡æ³¨å†Œé˜¶æ®µ</strong></p>
</li>
<li>é€šè¿‡ <code>job_registry.discover_and_import()</code> æŒ‰ <code>MONITOR_MODULES</code>ã€<code>TASK_MODULES</code> å¯¼å…¥ä»»åŠ¡æ¨¡å—</li>
<li>å„æ¨¡å—è°ƒç”¨ <code>register_monitor()</code> æˆ– <code>register_task()</code> æ³¨å†Œä»»åŠ¡</li>
<li>
<p>ä»»åŠ¡æè¿°ç¬¦ (<code>JobDescriptor</code>) è¢«æ·»åŠ åˆ° <code>MONITOR_JOBS</code> æˆ– <code>TASK_JOBS</code></p>
</li>
<li>
<p><strong>è°ƒåº¦å™¨å¯åŠ¨é˜¶æ®µ</strong></p>
</li>
<li>åˆ›å»º <code>TaskScheduler</code> å®ä¾‹ï¼ˆåŸºäº <code>APScheduler</code>ï¼‰</li>
<li>éå† <code>MONITOR_JOBS</code> å’Œ <code>TASK_JOBS</code>ï¼Œæ³¨å†Œåˆ°è°ƒåº¦å™¨</li>
<li>
<p>å¯åŠ¨æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡æ‰€æœ‰ä»»åŠ¡ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰</p>
</li>
<li>
<p><strong>Web æœåŠ¡ä¸é…ç½®ç›‘æ§å¯åŠ¨</strong></p>
</li>
<li>Web æœåŠ¡ä»¥ <code>asyncio.create_task</code> ä¸è°ƒåº¦å™¨å¹¶è¡Œè¿è¡Œ</li>
<li>
<p>å¯åŠ¨ <code>ConfigWatcher</code>ï¼ˆé»˜è®¤æ¯ 5 ç§’æ£€æŸ¥ <code>config.yml</code> ä¿®æ”¹æ—¶é—´ï¼‰</p>
</li>
<li>
<p><strong>é…ç½®å˜åŒ–å›è°ƒ</strong>ï¼ˆç”± ConfigWatcher åœ¨æ£€æµ‹åˆ°å˜åŒ–æ—¶è§¦å‘ï¼‰</p>
</li>
<li>å…ˆæ‰§è¡Œ <code>sync_config_to_db</code>ï¼ˆåˆ é™¤é…ç½®ä¸­å·²ç§»é™¤çš„ uid/room å¯¹åº”æ•°æ®åº“è®°å½•ï¼‰</li>
<li>
<p>å†æ›´æ–°è°ƒåº¦å™¨ä»»åŠ¡å‚æ•°ï¼ˆé—´éš”ã€Cronã€æš‚åœ/æ¢å¤ã€å…æ‰“æ‰°ï¼‰</p>
</li>
<li>
<p><strong>è¿è¡Œé˜¶æ®µ</strong></p>
</li>
<li>è°ƒåº¦å™¨æŒ‰é…ç½®çš„é—´éš”/æ—¶é—´æ‰§è¡Œä»»åŠ¡</li>
<li>ç›‘æ§ä»»åŠ¡æ£€æµ‹å˜åŒ–å¹¶æ¨é€é€šçŸ¥</li>
<li>å®šæ—¶ä»»åŠ¡æŒ‰Cronè¡¨è¾¾å¼æ‰§è¡Œ</li>
<li>WebæœåŠ¡å¤„ç†HTTPè¯·æ±‚</li>
</ol>
<hr />
<h2 id="_7">æ ¸å¿ƒæ¨¡å—è¯¦è§£<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h2>
<h3 id="1-mainpy-">1. main.py - ä¸»å…¥å£æ¨¡å—<a class="headerlink" href="#1-mainpy-" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šç³»ç»Ÿå¯åŠ¨å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†</p>
<p><strong>å…³é”®åŠŸèƒ½</strong>ï¼š
- åˆå§‹åŒ–æ—¥å¿—ç³»ç»Ÿï¼ˆæ§åˆ¶å°ï¼›main æ–‡ä»¶æ—¥å¿—åœ¨åˆ›å»º Web åº”ç”¨åæŒ‚è½½ï¼‰
- åˆ›å»ºå¹¶å¯åŠ¨ Web æœåŠ¡å™¨ï¼ˆFastAPI + Uvicornï¼‰
- åŠ è½½é…ç½®å¹¶åˆ›å»ºè°ƒåº¦å™¨
- æ³¨å†Œæ‰€æœ‰ç›‘æ§å’Œå®šæ—¶ä»»åŠ¡
- å¯åŠ¨é…ç½®ç›‘æ§å™¨ï¼ˆçƒ­é‡è½½ï¼‰
- å¤„ç†ä¼˜é›…å…³é—­ï¼ˆä¿¡å·å¤„ç†ï¼‰</p>
<p><strong>å…³é”®ä»£ç æµç¨‹</strong>ï¼š
<div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="c1"># 1. è®¾ç½®æ—¥å¿—ï¼ˆæ§åˆ¶å°ï¼›é TTY ä¸è¾“å‡ºï¼‰+ æŒ‚è½½ main æ–‡ä»¶æ—¥å¿—</span>
    <span class="n">setup_logging</span><span class="p">(</span><span class="n">log_level</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span> <span class="n">console_output</span><span class="o">=</span><span class="ow">not</span> <span class="n">is_background</span><span class="p">)</span>
    <span class="c1"># ... åˆ›å»º Web åº”ç”¨ã€Uvicornï¼Œå¹¶ asyncio.create_task(run_web_server())</span>
    <span class="n">log_manager</span><span class="o">.</span><span class="n">setup_file_logging</span><span class="p">(</span><span class="s2">&quot;main&quot;</span><span class="p">);</span> <span class="n">logging</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="c1"># 2. åŠ è½½é…ç½®ï¼ˆå¤±è´¥åˆ™ sys.exit(1)ï¼‰</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>

    <span class="c1"># 3. è‹¥å¯ç”¨ AI åŠ©æ‰‹åˆ™æ„å»º RAG å‘é‡åº“</span>
    <span class="k">if</span> <span class="n">is_ai_enabled</span><span class="p">():</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="n">build_docs_index</span><span class="p">)</span>

    <span class="c1"># 4. é‡ç½® Cookie ç¼“å­˜</span>
    <span class="k">await</span> <span class="n">cookie_cache</span><span class="o">.</span><span class="n">reset_all</span><span class="p">()</span>

    <span class="c1"># 5. åˆ›å»ºè°ƒåº¦å™¨å¹¶æ³¨å†Œä»»åŠ¡</span>
    <span class="n">scheduler</span> <span class="o">=</span> <span class="n">TaskScheduler</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">register_monitors</span><span class="p">(</span><span class="n">scheduler</span><span class="p">)</span>

    <span class="c1"># 6. å¯åŠ¨é…ç½®ç›‘æ§ï¼ˆçƒ­é‡è½½ï¼‰</span>
    <span class="n">config_watcher</span> <span class="o">=</span> <span class="n">ConfigWatcher</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">on_config_changed</span><span class="o">=...</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">config_watcher</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="c1"># 7. è¿è¡Œè°ƒåº¦å™¨ï¼ˆé˜»å¡ç›´è‡³æ”¶åˆ°åœæ­¢ä¿¡å·ï¼‰</span>
    <span class="k">await</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>
</code></pre></div></p>
<hr />
<h3 id="2-srcconfigpy-">2. src/config.py - é…ç½®ç®¡ç†æ¨¡å—<a class="headerlink" href="#2-srcconfigpy-" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šé…ç½®æ–‡ä»¶çš„åŠ è½½ã€è§£æå’ŒéªŒè¯</p>
<p><strong>æ ¸å¿ƒç±»</strong>ï¼š
- <code>AppConfig</code>ï¼šé…ç½®æ•°æ®æ¨¡å‹ï¼ˆåŸºäº Pydanticï¼‰
- <code>WeiboConfig</code>ï¼šå¾®åšé…ç½®å­æ¨¡å‹
- <code>HuyaConfig</code>ï¼šè™ç‰™é…ç½®å­æ¨¡å‹</p>
<p><strong>å…³é”®åŠŸèƒ½</strong>ï¼š
- ä»YAMLæ–‡ä»¶åŠ è½½é…ç½®
- é…ç½®ç¼“å­˜æœºåˆ¶ï¼ˆé¿å…é‡å¤è¯»å–ï¼‰
- é…ç½®éªŒè¯ï¼ˆPydanticæ¨¡å‹éªŒè¯ï¼‰
- æ‰å¹³åŒ–é…ç½®æ˜ å°„ï¼ˆYAMLåµŒå¥— â†’ æ‰å¹³å­—æ®µï¼‰</p>
<p><strong>é…ç½®ç»“æ„</strong>ï¼š
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AppConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="c1"># å¾®åšé…ç½®</span>
    <span class="n">weibo_cookie</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">weibo_uids</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># é€—å·åˆ†éš”</span>
    <span class="n">weibo_concurrency</span><span class="p">:</span> <span class="nb">int</span>

    <span class="c1"># è™ç‰™é…ç½®</span>
    <span class="n">huya_rooms</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># é€—å·åˆ†éš”</span>
    <span class="n">huya_concurrency</span><span class="p">:</span> <span class="nb">int</span>

    <span class="c1"># è°ƒåº¦å™¨é…ç½®</span>
    <span class="n">huya_monitor_interval_seconds</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">weibo_monitor_interval_seconds</span><span class="p">:</span> <span class="nb">int</span>

    <span class="c1"># æ¨é€é€šé“é…ç½®</span>
    <span class="n">push_channel_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span>

    <span class="c1"># å…æ‰“æ‰°æ—¶æ®µ</span>
    <span class="n">quiet_hours_enable</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">quiet_hours_start</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">quiet_hours_end</span><span class="p">:</span> <span class="nb">str</span>

    <span class="c1"># æ’ä»¶é…ç½®ï¼ˆä¾›æ‰©å±•ä½¿ç”¨ï¼‰</span>
    <span class="n">plugins</span><span class="p">:</span> <span class="nb">dict</span>
</code></pre></div></p>
<p><strong>é…ç½®åŠ è½½æµç¨‹</strong>ï¼š
1. <code>load_config_from_yml()</code> è¯»å–YAMLæ–‡ä»¶
2. å°†åµŒå¥—ç»“æ„è½¬æ¢ä¸ºæ‰å¹³ç»“æ„
3. åˆ›å»º <code>AppConfig</code> å®ä¾‹ï¼ˆPydanticéªŒè¯ï¼‰
4. ç¼“å­˜é…ç½®å®ä¾‹ï¼ˆ<code>_config_cache</code>ï¼‰</p>
<hr />
<h3 id="3-srcmonitorpy-">3. src/monitor.py - ç›‘æ§åŸºç±»<a class="headerlink" href="#3-srcmonitorpy-" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šæä¾›ç›‘æ§ä»»åŠ¡çš„æŠ½è±¡åŸºç±»å’Œé€šç”¨åŠŸèƒ½</p>
<p><strong>æ ¸å¿ƒç±»</strong>ï¼š
- <code>BaseMonitor</code>ï¼šç›‘æ§åŸºç±»ï¼ˆæŠ½è±¡ç±»ï¼‰
- <code>CookieExpiredError</code>ï¼šCookieè¿‡æœŸå¼‚å¸¸</p>
<p><strong>å…³é”®åŠŸèƒ½</strong>ï¼š
- æ•°æ®åº“åˆå§‹åŒ–å’Œç®¡ç†
- æ¨é€æœåŠ¡åˆå§‹åŒ–å’Œç®¡ç†
- HTTPä¼šè¯ç®¡ç†ï¼ˆå…±äº«æˆ–ç‹¬ç«‹ï¼‰
- Cookieè¿‡æœŸæ£€æµ‹å’Œå¤„ç†
- å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ”¯æŒ</p>
<p><strong>åŸºç±»æ¥å£</strong>ï¼š
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseMonitor</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;è¿è¡Œç›‘æ§ä»»åŠ¡&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">monitor_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ç›‘æ§å™¨åç§°&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">platform_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;å¹³å°åç§°ï¼ˆç”¨äº Cookie ç¼“å­˜ï¼‰&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">push_channel_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;æ¨é€é€šé“åç§°åˆ—è¡¨ï¼Œç”¨äºè¿‡æ»¤ï¼›è¿”å› None æˆ–ç©ºåˆ—è¡¨æ—¶ä½¿ç”¨å…¨éƒ¨é€šé“ã€‚å­ç±»å¯é‡å†™ä»¥è¿”å›ä»»åŠ¡é…ç½®ä¸­çš„ push_channelsã€‚&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></p>
<p><strong>å­ç±»å®ç°ç¤ºä¾‹</strong>ï¼š
- <code>HuyaMonitor</code>ï¼šè™ç‰™ç›´æ’­ç›‘æ§
- <code>WeiboMonitor</code>ï¼šå¾®åšç›‘æ§</p>
<hr />
<h3 id="4-srcschedulerpy-">4. src/scheduler.py - ä»»åŠ¡è°ƒåº¦å™¨<a class="headerlink" href="#4-srcschedulerpy-" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šåŸºäºAPSchedulerçš„ä»»åŠ¡è°ƒåº¦ç®¡ç†</p>
<p><strong>æ ¸å¿ƒç±»</strong>ï¼š
- <code>TaskScheduler</code>ï¼šä»»åŠ¡è°ƒåº¦å™¨å°è£…
- <code>TaskGroupFormatter</code>ï¼šæ—¥å¿—æ ¼å¼åŒ–å™¨ï¼ˆä»»åŠ¡ç»„åˆ†éš”ï¼‰</p>
<p><strong>å…³é”®åŠŸèƒ½</strong>ï¼š
- æ·»åŠ é—´éš”ä»»åŠ¡ï¼ˆ<code>add_interval_job</code>ï¼‰
- æ·»åŠ Cronä»»åŠ¡ï¼ˆ<code>add_cron_job</code>ï¼‰
- æ›´æ–°ä»»åŠ¡å‚æ•°ï¼ˆçƒ­é‡è½½æ”¯æŒï¼‰
- ä¼˜é›…å…³é—­ï¼ˆä¿¡å·å¤„ç†ï¼‰</p>
<p><strong>ä»»åŠ¡ç±»å‹</strong>ï¼š
- <strong>é—´éš”ä»»åŠ¡</strong>ï¼šä½¿ç”¨ <code>IntervalTrigger</code>ï¼ŒæŒ‰å›ºå®šé—´éš”æ‰§è¡Œ
  - ç¤ºä¾‹ï¼šè™ç‰™ç›‘æ§æ¯60ç§’æ‰§è¡Œä¸€æ¬¡
- <strong>Cronä»»åŠ¡</strong>ï¼šä½¿ç”¨ <code>CronTrigger</code>ï¼ŒæŒ‰æ—¶é—´è¡¨è¾¾å¼æ‰§è¡Œ
  - ç¤ºä¾‹ï¼šæ¯å¤©08:00æ‰§è¡Œç­¾åˆ°ä»»åŠ¡</p>
<p><strong>çƒ­é‡è½½æ”¯æŒ</strong>ï¼š
- <code>update_interval_job()</code>ï¼šæ›´æ–°é—´éš”ä»»åŠ¡çš„é—´éš”æ—¶é—´
- <code>update_cron_job()</code>ï¼šæ›´æ–°Cronä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´</p>
<hr />
<h3 id="5-srcdatabasepy-">5. src/database.py - æ•°æ®åº“æ¨¡å—<a class="headerlink" href="#5-srcdatabasepy-" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šå¼‚æ­¥SQLiteæ•°æ®åº“æ“ä½œ</p>
<p><strong>æ ¸å¿ƒç±»</strong>ï¼š
- <code>AsyncDatabase</code>ï¼šå¼‚æ­¥æ•°æ®åº“æ“ä½œç±»</p>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š
- <strong>å…±äº«è¿æ¥æ¨¡å¼</strong>ï¼šå¤šä¸ªå®ä¾‹å…±äº«åŒä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼ˆæé«˜æ€§èƒ½ï¼‰
- <strong>WALæ¨¡å¼</strong>ï¼šå¯ç”¨Write-Ahead Loggingï¼Œæé«˜å¹¶å‘æ€§èƒ½
- <strong>è¿æ¥å¥åº·æ£€æŸ¥</strong>ï¼šè‡ªåŠ¨æ£€æµ‹è¿æ¥å¤±æ•ˆå¹¶é‡è¿
- <strong>é‡è¯•æœºåˆ¶</strong>ï¼šæ•°æ®åº“é”å®šæ—¶çš„æŒ‡æ•°é€€é¿é‡è¯•
- <strong>SQLå…¼å®¹</strong>ï¼šæ”¯æŒMySQLé£æ ¼çš„å‚æ•°å ä½ç¬¦è½¬æ¢</p>
<p><strong>è¡¨ç»“æ„</strong>ï¼š
<div class="highlight"><pre><span></span><code><span class="c1">-- å¾®åšè¡¨</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">weibo</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">UID</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="err">ç”¨æˆ·å</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="err">è®¤è¯ä¿¡æ¯</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="err">ç®€ä»‹</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="err">ç²‰ä¸æ•°</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="err">å¾®åšæ•°</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="err">æ–‡æœ¬</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="n">mid</span><span class="w"> </span><span class="nb">TEXT</span>
<span class="p">);</span>

<span class="c1">-- è™ç‰™è¡¨</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">huya</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">room</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">is_live</span><span class="w"> </span><span class="nb">TEXT</span>
<span class="p">);</span>
</code></pre></div></p>
<p><strong>è¿æ¥ç®¡ç†</strong>ï¼š
- å…¨å±€å•ä¾‹è¿æ¥ï¼ˆ<code>_shared_connection</code>ï¼‰
- å¼•ç”¨è®¡æ•°æœºåˆ¶ï¼ˆ<code>_connection_ref_count</code>ï¼‰
- çº¿ç¨‹å®‰å…¨çš„è¿æ¥ç®¡ç†ï¼ˆ<code>_connection_lock</code>ï¼‰</p>
<hr />
<h3 id="6-srcjob_registrypy-">6. src/job_registry.py - ä»»åŠ¡æ³¨å†Œè¡¨<a class="headerlink" href="#6-srcjob_registrypy-" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šç»Ÿä¸€ç®¡ç†ç›‘æ§å’Œå®šæ—¶ä»»åŠ¡çš„æ³¨å†Œ</p>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼š
- <code>JobDescriptor</code>ï¼šä»»åŠ¡æè¿°ç¬¦ï¼ˆjob_idã€run_funcã€triggerã€get_trigger_kwargsã€original_run_funcï¼›å…¶ä¸­ original_run_func ç”¨äº Web æ‰‹åŠ¨è§¦å‘æ—¶ç»•è¿‡ã€Œå½“å¤©å·²è¿è¡Œåˆ™è·³è¿‡ã€ï¼‰
- <code>MONITOR_MODULES</code>ï¼šç›‘æ§æ¨¡å—åˆ—è¡¨
- <code>TASK_MODULES</code>ï¼šå®šæ—¶ä»»åŠ¡æ¨¡å—åˆ—è¡¨
- <code>MONITOR_JOBS</code>ï¼šå·²æ³¨å†Œçš„ç›‘æ§ä»»åŠ¡åˆ—è¡¨
- <code>TASK_JOBS</code>ï¼šå·²æ³¨å†Œçš„å®šæ—¶ä»»åŠ¡åˆ—è¡¨</p>
<p><strong>æ³¨å†Œæµç¨‹</strong>ï¼š
1. åœ¨ <code>MONITOR_MODULES</code> æˆ– <code>TASK_MODULES</code> ä¸­æ·»åŠ æ¨¡å—è·¯å¾„
2. <code>discover_and_import()</code> æŒ‰ <code>MONITOR_MODULES</code>ã€<code>TASK_MODULES</code> é¡ºåºå¯¼å…¥æ¨¡å—ï¼Œæ¨¡å—åŠ è½½æ—¶è°ƒç”¨ <code>register_monitor()</code> æˆ– <code>register_task()</code>ï¼Œä»»åŠ¡æè¿°ç¬¦åŠ å…¥ <code>MONITOR_JOBS</code> æˆ– <code>TASK_JOBS</code>
3. è°ƒåº¦å™¨å¯åŠ¨æ—¶æ³¨å†Œ <code>MONITOR_JOBS</code>ã€<code>TASK_JOBS</code></p>
<p><strong>æ‰©å±•æ–°ä»»åŠ¡</strong>ï¼š
<div class="highlight"><pre><span></span><code><span class="c1"># 1. åœ¨ monitors/ æˆ– tasks/ ä¸‹åˆ›å»ºæ¨¡å—ï¼ˆè§ docs/SECONDARY_DEVELOPMENT.mdï¼‰</span>
<span class="c1"># 2. åœ¨ job_registry.py çš„ MONITOR_MODULES æˆ– TASK_MODULES ä¸­è¿½åŠ æ¨¡å—è·¯å¾„</span>
<span class="n">MONITOR_MODULES</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;monitors.huya_monitor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;monitors.weibo_monitor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;monitors.bilibili_monitor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;monitors.douyin_monitor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;monitors.douyu_monitor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;monitors.xhs_monitor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;monitors.new_monitor&quot;</span><span class="p">,</span>  <span class="c1"># æ–°å¢</span>
<span class="p">]</span>

<span class="c1"># 3. åœ¨æ¨¡å—ä¸­æ³¨å†Œä»»åŠ¡</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.job_registry</span><span class="w"> </span><span class="kn">import</span> <span class="n">register_monitor</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_new_monitor</span><span class="p">():</span>
    <span class="c1"># ç›‘æ§é€»è¾‘</span>
    <span class="k">pass</span>

<span class="n">register_monitor</span><span class="p">(</span>
    <span class="n">job_id</span><span class="o">=</span><span class="s2">&quot;new_monitor&quot;</span><span class="p">,</span>
    <span class="n">run_func</span><span class="o">=</span><span class="n">run_new_monitor</span><span class="p">,</span>
    <span class="n">get_trigger_kwargs</span><span class="o">=</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">new_monitor_interval_seconds</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div></p>
<hr />
<h3 id="7-srcconfig_db_syncpy-">7. src/config_db_sync.py - é…ç½®ä¸æ•°æ®åº“åŒæ­¥<a class="headerlink" href="#7-srcconfig_db_syncpy-" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šåœ¨é…ç½®çƒ­é‡è½½æ—¶ï¼Œåˆ é™¤é…ç½®ä¸­å·²ç§»é™¤çš„ uid/room å¯¹åº”çš„æ•°æ®åº“è®°å½•ï¼Œä¿æŒé…ç½®ä¸æ•°æ®åº“ä¸€è‡´ã€‚</p>
<p><strong>æ ¸å¿ƒå‡½æ•°</strong>ï¼š
- <code>sync_config_to_db(old_config, new_config)</code>ï¼šå¯¹æ¯”æ–°æ—§é…ç½®ä¸­çš„ç›‘æ§åˆ—è¡¨ï¼ˆweibo_uidsã€huya_roomsã€bilibili_uidsã€douyin_douyin_idsã€douyu_roomsã€xhs_profile_idsï¼‰ï¼Œè®¡ç®— <code>removed_ids = old_ids - new_ids</code>ï¼Œå¯¹æ¯ä¸ªç›‘æ§å¹³å°å¯¹åº”çš„è¡¨æ‰§è¡Œ <code>DELETE</code>ï¼Œåˆ é™¤å·²ä»é…ç½®ä¸­ç§»é™¤çš„è®°å½•ã€‚é¦–æ¬¡å¯åŠ¨ï¼ˆ<code>old_config is None</code>ï¼‰æ—¶ä¸æ‰§è¡Œåˆ é™¤ã€‚</p>
<p><strong>æ”¯æŒçš„å¹³å°ä¸è¡¨æ˜ å°„</strong>ï¼šå¾®åš â†’ weibo.UIDï¼›è™ç‰™ â†’ huya.roomï¼›å“”å“©å“”å“© â†’ bilibili_dynamic.uidã€bilibili_live.uidï¼›æŠ–éŸ³ â†’ douyin.douyin_idï¼›æ–—é±¼ â†’ douyu.roomï¼›å°çº¢ä¹¦ â†’ xhs.profile_idã€‚</p>
<hr />
<h3 id="8-srcconfig_watcherpy-">8. src/config_watcher.py - é…ç½®ç›‘æ§å™¨<a class="headerlink" href="#8-srcconfig_watcherpy-" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šç›‘æ§é…ç½®æ–‡ä»¶å˜åŒ–å¹¶è§¦å‘çƒ­é‡è½½</p>
<p><strong>æ ¸å¿ƒç±»</strong>ï¼š
- <code>ConfigWatcher</code>ï¼šé…ç½®æ–‡ä»¶ç›‘æ§å™¨</p>
<p><strong>å…³é”®åŠŸèƒ½</strong>ï¼š
- å®šæœŸæ£€æŸ¥é…ç½®æ–‡ä»¶ä¿®æ”¹æ—¶é—´ï¼ˆé»˜è®¤5ç§’ï¼‰
- æ£€æµ‹åˆ°å˜åŒ–æ—¶é‡æ–°åŠ è½½é…ç½®
- æ¯”è¾ƒé…ç½®å†…å®¹å˜åŒ–ï¼ˆé¿å…æ— æ•ˆé‡è½½ï¼‰
- è§¦å‘å›è°ƒå‡½æ•°æ›´æ–°è°ƒåº¦å™¨ä»»åŠ¡å‚æ•°</p>
<p><strong>çƒ­é‡è½½æµç¨‹</strong>ï¼š
1. <code>ConfigWatcher</code> æ¯ 5 ç§’æ£€æŸ¥ <code>config.yml</code> çš„ä¿®æ”¹æ—¶é—´ï¼ˆ<code>check_interval</code> é»˜è®¤ 5ï¼‰
2. æ£€æµ‹åˆ° <code>st_mtime</code> å˜åŒ–æ—¶ï¼šè°ƒç”¨ <code>get_config(reload=True)</code> é‡æ–°åŠ è½½ï¼ŒåŒæ­¥è¯»å– YAML æå– <code>ai_assistant</code> èŠ‚ç‚¹ï¼ˆç‹¬ç«‹äº AppConfigï¼‰
3. é€šè¿‡ <code>_config_changed()</code> æ¯”è¾ƒæ–°æ—§é…ç½®ï¼ˆç›‘æ§ enable/é—´éš”ã€ä»»åŠ¡ enable/timeã€å…æ‰“æ‰°ã€æ¨é€é€šé“ã€plugins ç­‰ï¼‰åŠ <code>ai_assistant</code> åŸå§‹å†…å®¹ï¼Œåˆ¤æ–­æ˜¯å¦å‘ç”Ÿå®é™…å˜åŒ–ï¼›é¿å…æ–‡ä»¶ä¿å­˜ä½†å†…å®¹æœªå˜æ—¶è¯¯è§¦å‘
4. è‹¥æœ‰å˜åŒ–åˆ™è°ƒç”¨ <code>on_config_changed()</code> å›è°ƒ
5. å›è°ƒå†…å…ˆæ‰§è¡Œ <code>sync_config_to_db</code>ï¼ˆåˆ é™¤é…ç½®ä¸­å·²ç§»é™¤çš„ uid/roomï¼‰ï¼Œå†æ›´æ–°è°ƒåº¦å™¨ä»»åŠ¡å‚æ•°ï¼ˆé—´éš”ã€Cronã€æš‚åœ/æ¢å¤ã€å…æ‰“æ‰°ï¼‰</p>
<p><strong>é…ç½®å˜åŒ–æ£€æµ‹</strong>ï¼š
- æ¯”è¾ƒå…³é”®é…ç½®å­—æ®µï¼ˆå„ç›‘æ§ enable/é—´éš”ã€å„ä»»åŠ¡ enable/æ‰§è¡Œæ—¶é—´ã€å…æ‰“æ‰°ã€æ¨é€é€šé“ç­‰ï¼‰
- å•ç‹¬æ¯”è¾ƒ <code>ai_assistant</code> èŠ‚ç‚¹ï¼ˆYAML åŸå§‹å­—å…¸ï¼‰ï¼Œå…¶å˜åŒ–ä¹Ÿä¼šè§¦å‘çƒ­é‡è½½ï¼ˆå¦‚ LLM é…ç½®ç­‰ï¼‰
- æ”¯æŒåµŒå¥—é…ç½®æ¯”è¾ƒï¼ˆå¤šè´¦å·ã€å¤š Cookie ç­‰ï¼‰
- é¿å…å› æ–‡ä»¶ä¿å­˜ä½†å†…å®¹æœªå˜è€Œè§¦å‘é‡è½½</p>
<hr />
<h3 id="9-srccookie_cachepy-cookie">9. src/cookie_cache.py - Cookieç¼“å­˜ç®¡ç†<a class="headerlink" href="#9-srccookie_cachepy-cookie" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šç®¡ç†å„å¹³å°Cookieçš„è¿‡æœŸçŠ¶æ€</p>
<p><strong>æ ¸å¿ƒç±»</strong>ï¼š
- <code>CookieCache</code>ï¼šCookieç¼“å­˜ç®¡ç†å™¨</p>
<p><strong>å…³é”®åŠŸèƒ½</strong>ï¼š
- Cookieæœ‰æ•ˆæ€§çŠ¶æ€ç¼“å­˜ï¼ˆ<code>valid</code>ï¼‰
- è¿‡æœŸæé†’å‘é€çŠ¶æ€ï¼ˆ<code>notified</code>ï¼‰
- æ–‡ä»¶æŒä¹…åŒ–ï¼ˆ<code>data/cookie_cache.json</code>ï¼‰
- å¼‚æ­¥æ“ä½œï¼ˆå¸¦é”ä¿æŠ¤ï¼‰</p>
<p><strong>ç¼“å­˜ç»“æ„</strong>ï¼š
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;weibo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;valid&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;notified&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;huya&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;valid&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;notified&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>çŠ¶æ€ç®¡ç†</strong>ï¼š
- <code>mark_expired()</code>ï¼šæ ‡è®°Cookieä¸ºè¿‡æœŸ
- <code>mark_valid()</code>ï¼šæ ‡è®°Cookieä¸ºæœ‰æ•ˆï¼ˆé‡ç½®æé†’çŠ¶æ€ï¼‰
- <code>reset_all()</code>ï¼šå¯åŠ¨æ—¶é‡ç½®æ‰€æœ‰Cookieä¸ºæœ‰æ•ˆçŠ¶æ€
- <code>is_notified()</code>ï¼šæ£€æŸ¥æ˜¯å¦å·²å‘é€è¿‡æœŸæé†’</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š
- ç›‘æ§ä»»åŠ¡æ£€æµ‹åˆ°Cookieå¤±æ•ˆæ—¶ï¼Œè°ƒç”¨ <code>mark_expired()</code>
- é¿å…é‡å¤å‘é€Cookieè¿‡æœŸæé†’ï¼ˆé€šè¿‡ <code>notified</code> æ ‡è®°ï¼‰
- Cookieæ¢å¤æœ‰æ•ˆæ—¶ï¼Œé‡ç½®æé†’çŠ¶æ€ï¼Œå…è®¸ä¸‹æ¬¡è¿‡æœŸæ—¶å†æ¬¡æé†’</p>
<hr />
<h3 id="10-srcpush_channel-">10. src/push_channel/ - æ¨é€é€šé“æ¨¡å—<a class="headerlink" href="#10-srcpush_channel-" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šç»Ÿä¸€ç®¡ç†å¤šç§æ¨é€é€šé“</p>
<p><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼š
- <code>_push_channel.py</code>ï¼šæ¨é€é€šé“åŸºç±»
- <code>manager.py</code>ï¼šç»Ÿä¸€æ¨é€ç®¡ç†å™¨
- å„é€šé“å®ç°ï¼š<code>wecom_apps.py</code>ã€<code>dingtalk_bot.py</code> ç­‰</p>
<p><strong>æ”¯æŒçš„æ¨é€é€šé“</strong>ï¼š
- ä¼ä¸šå¾®ä¿¡ï¼ˆè‡ªå»ºåº”ç”¨ã€ç¾¤èŠæœºå™¨äººï¼‰
- é’‰é’‰ï¼ˆç¾¤èŠæœºå™¨äººï¼‰
- é£ä¹¦ï¼ˆè‡ªå»ºåº”ç”¨ã€ç¾¤èŠæœºå™¨äººï¼‰
- Telegramæœºå™¨äºº
- QQé¢‘é“æœºå™¨äººã€NapCatQQ
- Serveré…±ã€PushPlusã€WxPusher
- Barkã€Gotifyã€Webhookã€Email</p>
<p><strong>æ¨é€é€šé“åŸºç±»</strong>ï¼š
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PushChannel</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">jump_url</span><span class="p">,</span> <span class="n">pic_url</span><span class="p">,</span> <span class="n">extend_data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;æ¨é€æ¶ˆæ¯&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div></p>
<p><strong>ç»Ÿä¸€æ¨é€ç®¡ç†å™¨</strong>ï¼š
- <code>UnifiedPushManager</code>ï¼šç®¡ç†å¤šä¸ªæ¨é€é€šé“
- <code>send_news()</code>ï¼šå¹¶å‘å‘é€åˆ°æ‰€æœ‰å¯ç”¨çš„é€šé“
- æ”¯æŒé€šé“ç‰¹å®šçš„æè¿°ç”Ÿæˆï¼ˆ<code>description_func</code>ï¼‰</p>
<p><strong>é€šé“æ³¨å†Œæœºåˆ¶</strong>ï¼š
<div class="highlight"><pre><span></span><code><span class="c1"># src/push_channel/__init__.py</span>
<span class="n">_channel_type_to_class</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;wecom_apps&quot;</span><span class="p">:</span> <span class="n">WeComApps</span><span class="p">,</span>
    <span class="s2">&quot;dingtalk_bot&quot;</span><span class="p">:</span> <span class="n">DingtalkBot</span><span class="p">,</span>
    <span class="c1"># ...</span>
<span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_push_channel</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">session</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PushChannel</span><span class="p">:</span>
    <span class="n">channel_type</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_channel_type_to_class</span><span class="p">[</span><span class="n">channel_type</span><span class="p">](</span><span class="n">config</span><span class="p">,</span> <span class="n">session</span><span class="p">)</span>
</code></pre></div></p>
<hr />
<h3 id="11-srcweb_serverpy-web">11. src/web_server.py - WebæœåŠ¡å™¨<a class="headerlink" href="#11-srcweb_serverpy-web" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šæä¾›Webç®¡ç†ç•Œé¢å’ŒAPIæ¥å£</p>
<p><strong>æŠ€æœ¯æ ˆ</strong>ï¼š
- FastAPIï¼šWebæ¡†æ¶
- Jinja2ï¼šæ¨¡æ¿å¼•æ“
- Uvicornï¼šASGIæœåŠ¡å™¨</p>
<p><strong>ä¸»è¦åŠŸèƒ½</strong>ï¼š
- <strong>é…ç½®ç®¡ç†</strong>ï¼šåœ¨çº¿ç¼–è¾‘ <code>config.yml</code>ï¼ˆä¿ç•™æ³¨é‡Šï¼‰
- <strong>æ•°æ®æŸ¥çœ‹</strong>ï¼šæŸ¥çœ‹ç›‘æ§æ•°æ®ï¼ˆåˆ†é¡µã€è¿‡æ»¤ï¼‰
- <strong>æ—¥å¿—æŸ¥çœ‹</strong>ï¼šæŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
- <strong>APIæ¥å£</strong>ï¼šRESTful APIä¾›å¤–éƒ¨è°ƒç”¨</p>
<p><strong>é¡µé¢è·¯ç”±</strong>ï¼š
- <code>/</code>ï¼šé¦–é¡µï¼ˆå·²ç™»å½•åˆ™é…ç½®é¡µï¼Œæœªç™»å½•åˆ™ç™»å½•é¡µï¼‰
- <code>/login</code>ï¼šç™»å½•é¡µé¢
- <code>/config</code>ï¼šé…ç½®ç®¡ç†é¡µé¢
- <code>/tasks</code>ï¼šä»»åŠ¡ç®¡ç†é¡µé¢
- <code>/data</code>ï¼šæ•°æ®å±•ç¤ºé¡µé¢
- <code>/logs</code>ï¼šæ—¥å¿—å±•ç¤ºé¡µé¢</p>
<p><strong>APIæ¥å£</strong>ï¼š
- <code>GET /api/config</code>ï¼šè·å–é…ç½®
- <code>POST /api/config</code>ï¼šä¿å­˜é…ç½®ï¼ˆè§¦å‘çƒ­é‡è½½ï¼‰
- <code>GET /api/data/{platform}</code>ï¼šè·å–ç›‘æ§æ•°æ®
- <code>GET /api/logs</code>ï¼šè·å–æ—¥å¿—å†…å®¹ï¼ˆå¯é€‰ <code>task</code> å‚æ•°æŒ‡å®šä»»åŠ¡ä»Šæ—¥æ—¥å¿—ï¼‰
- <code>GET /api/logs/tasks</code>ï¼šè·å–ä»»åŠ¡æ—¥å¿—åˆ—è¡¨
- <code>GET /api/monitor-status</code>ï¼šè·å–å…¨éƒ¨ç›‘æ§çŠ¶æ€ï¼ˆæ— éœ€ç™»å½•ï¼‰
- <code>GET /api/monitor-status/{platform}</code>ï¼šæŒ‰å¹³å°è·å–ç›‘æ§çŠ¶æ€ï¼ˆæ— éœ€ç™»å½•ï¼‰
- <code>GET /api/version</code>ï¼šè·å–ç‰ˆæœ¬ä¿¡æ¯ï¼ˆæ— éœ€ç™»å½•ï¼Œç”¨äºå‰ç«¯æ£€æµ‹æ–°ç‰ˆæœ¬ï¼‰
- <code>GET /api/assistant/status</code>ï¼šè·å– AI åŠ©æ‰‹çŠ¶æ€ï¼ˆéœ€ç™»å½•ï¼‰
- <code>POST /api/assistant/chat</code>ï¼šAI å¯¹è¯ï¼ˆéœ€ç™»å½•ï¼Œéœ€ AI ä¾èµ–ï¼‰
- <code>POST /api/assistant/chat/stream</code>ï¼šAI å¯¹è¯æµå¼æ¥å£ï¼ˆSSEï¼Œéœ€ç™»å½•ï¼‰
- <code>POST /api/assistant/apply-action</code>ï¼šæ‰§è¡Œå¯ç¡®è®¤æ“ä½œï¼ˆéœ€ç™»å½•ï¼‰
- <code>GET/POST /api/webhooks/wecom</code>ï¼šä¼ä¸šå¾®ä¿¡è‡ªå»ºåº”ç”¨æ¥æ”¶æ¶ˆæ¯å›è°ƒï¼ˆAI å¯¹è¯å…¥å£ï¼Œæ”¯æŒå¤šåº”ç”¨ä¾æ¬¡è§£å¯†ï¼‰
- <code>POST /api/webhooks/telegram/{channel_name:path}</code>ï¼šTelegram æœºå™¨äºº Webhookï¼ˆAI å¯¹è¯å…¥å£ï¼‰</p>
<p><strong>é…ç½®ä¿å­˜ç‰¹æ€§</strong>ï¼š
- ä½¿ç”¨ <code>ruamel.yaml</code> ä¿ç•™YAMLæ³¨é‡Š
- é…ç½®éªŒè¯ï¼ˆåŠ è½½æµ‹è¯•ï¼‰
- ä¿å­˜åè‡ªåŠ¨è§¦å‘çƒ­é‡è½½</p>
<hr />
<h3 id="12-srclog_managerpy-">12. src/log_manager.py - æ—¥å¿—ç®¡ç†<a class="headerlink" href="#12-srclog_managerpy-" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šç»Ÿä¸€ç®¡ç†æ—¥å¿—æ–‡ä»¶</p>
<p><strong>æ ¸å¿ƒç±»</strong>ï¼š
- <code>LogManager</code>ï¼šæ—¥å¿—ç®¡ç†å™¨
- <code>DailyRotatingFileHandler</code>ï¼šæŒ‰æ—¥æœŸè½®è½¬çš„æ–‡ä»¶å¤„ç†å™¨</p>
<p><strong>å…³é”®åŠŸèƒ½</strong>ï¼š
- æŒ‰æ—¥æœŸè‡ªåŠ¨è½®è½¬æ—¥å¿—æ–‡ä»¶ï¼ˆ<code>main_20250130.log</code>ï¼‰
- æ—¥å¿—æ¸…ç†ï¼ˆåˆ é™¤è¶…è¿‡ä¿ç•™å¤©æ•°çš„æ—¥å¿—ï¼‰
- æ—¥å¿—æ–‡ä»¶å¤§å°ç»Ÿè®¡</p>
<p><strong>æ—¥å¿—æ–‡ä»¶ç»“æ„</strong>ï¼š
<div class="highlight"><pre><span></span><code>logs/
  main_20250130.log           # ä»Šæ—¥æ€»æ—¥å¿—
  main_20250129.log
  task_ikuuu_checkin_20250130.log   # å„ä»»åŠ¡ä¸“å±æ—¥å¿—ï¼ˆæŒ‰ä»»åŠ¡å+æ—¥æœŸï¼‰
  task_huya_monitor_20250130.log
  task_log_cleanup_20250130.log
</code></pre></div></p>
<ul>
<li>æ€»æ—¥å¿— <code>main_*.log</code>ï¼šæ‰€æœ‰è¾“å‡ºæ±‡æ€»</li>
<li>ä»»åŠ¡æ—¥å¿— <code>task_{job_id}_*.log</code>ï¼šæ¯ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶å•ç‹¬å†™å…¥</li>
</ul>
<p><strong>ä»»åŠ¡æ—¥å¿—å®ç°</strong>ï¼š<code>job_registry</code> åœ¨ä»»åŠ¡æ‰§è¡Œå‰å°†ä»»åŠ¡ä¸“å±æ–‡ä»¶ Handler æŒ‚åˆ° <code>logging.root</code>ï¼Œæ‰§è¡Œç»“æŸåç§»é™¤ã€‚è¿™æ ·å¯ç»Ÿä¸€æ•è·ç›‘æ§ç±»ï¼ˆ<code>BaseMonitor</code> çš„ <code>__class__.__name__</code> loggerï¼‰ã€æ¨é€é€šé“ã€å®šæ—¶ä»»åŠ¡æ¨¡å—ç­‰æ‰€æœ‰ç›¸å…³è¾“å‡ºï¼Œé¿å…ä»…æŒ‚æ¨¡å— logger æ—¶æ¼æ‰ç›‘æ§/æ¨é€æ—¥å¿—ã€‚</p>
<p><strong>æ—¥å¿—æ¸…ç†</strong>ï¼š
- å®šæ—¶ä»»åŠ¡æ¯å¤©æ‰§è¡Œä¸€æ¬¡ï¼ˆé»˜è®¤ 02:10ï¼‰
- åˆ é™¤è¶…è¿‡ <code>retention_days</code> å¤©çš„æ—¥å¿—æ–‡ä»¶ï¼ˆåŒ…æ‹¬æ€»æ—¥å¿—å’Œå„ä»»åŠ¡æ—¥å¿—ï¼‰
- ä»æ–‡ä»¶åæå–æ—¥æœŸæˆ–ä½¿ç”¨æ–‡ä»¶ä¿®æ”¹æ—¶é—´</p>
<hr />
<h3 id="13-srcai_assistant-ai">13. src/ai_assistant/ - AI åŠ©æ‰‹æ¨¡å—<a class="headerlink" href="#13-srcai_assistant-ai" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šåŸºäº RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰+ LLM æä¾›æ™ºèƒ½å¯¹è¯èƒ½åŠ›ï¼Œæ”¯æŒé…ç½®ç”Ÿæˆã€æ—¥å¿—è¯Šæ–­ã€æ•°æ®æ´å¯ŸåŠå¯æ‰§è¡Œæ“ä½œã€‚</p>
<p><strong>RAG æ£€ç´¢ä¼˜åŒ–</strong>ï¼ˆå‚è€ƒ datawhalechina/all-in-ragï¼‰ï¼šMarkdown ç»“æ„æ„ŸçŸ¥åˆ†å—ã€çˆ¶å­æ–‡æœ¬å—ä¸æ™ºèƒ½å»é‡ï¼›å‘é‡ + BM25 æ··åˆæ£€ç´¢ä¸ RRF é‡æ’ï¼›æŸ¥è¯¢è·¯ç”±æŒ‰é—®é¢˜ç±»å‹ä¾§é‡é…ç½®/æ—¥å¿—/æ–‡æ¡£ã€‚</p>
<p><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼š
- <code>config.py</code>ï¼šAI é…ç½®ï¼ˆproviderã€api_keyã€modelã€embedding_modelã€chroma ç­‰ï¼‰
- <code>rag.py</code>ï¼šå‘é‡æ£€ç´¢ + BM25 æ··åˆæ£€ç´¢ï¼Œä»æ–‡æ¡£ã€é…ç½®ã€æ—¥å¿—ä¸­æ£€ç´¢ç›¸å…³ä¸Šä¸‹æ–‡
- <code>indexer.py</code>ï¼šæ„å»ºæ–‡æ¡£ç´¢å¼•ï¼ˆ<code>docs/*.md</code>ã€<code>README.md</code>ï¼‰å­˜å…¥ Chromaï¼›ä¸»å…¥å£ <code>main.py</code> åœ¨å¯åŠ¨å‰è°ƒç”¨ï¼Œè‹¥ AI åŠ©æ‰‹å¯ç”¨åˆ™é¢„æ„å»ºå‘é‡åº“
- <code>conversation.py</code>ï¼šä¼šè¯ä¸æ¶ˆæ¯æŒä¹…åŒ–ï¼ˆ<code>data/ai_assistant_conversations.json</code>ï¼‰
- <code>intent_parser.py</code>ï¼šè§£æå¯æ‰§è¡Œæ„å›¾ï¼ˆå¼€å…³ç›‘æ§ã€é…ç½®åˆ—è¡¨å¢åˆ ï¼‰
- <code>tools.py</code>ï¼šAI å¯è°ƒç”¨å·¥å…·ï¼ˆé…ç½®ç‰‡æ®µã€æ—¥å¿—ã€å½“å‰çŠ¶æ€ç­‰ï¼‰
- <code>tools_current_state.py</code>ï¼šæŸ¥è¯¢å½“å‰ç›‘æ§æ•°æ®ï¼ˆå¼€æ’­çŠ¶æ€ç­‰ï¼‰
- <code>prompts.py</code>ï¼šç³»ç»Ÿæç¤ºè¯
- <code>llm_client.py</code>ï¼šLLM è°ƒç”¨ï¼ˆOpenAI å…¼å®¹ APIï¼‰
- <code>platform_chat.py</code>ï¼šæ¨é€å¹³å°å¯¹è¯å…¥å£ï¼ˆWebhook è·¯ç”±åˆ†å‘ï¼‰
- <code>wecom_crypto.py</code>ï¼šä¼ä¸šå¾®ä¿¡æ¶ˆæ¯åŠ è§£å¯†ï¼ˆEncodingAESKeyï¼‰
- <code>platform_handlers/</code>ï¼šå„å¹³å°æ¶ˆæ¯å¤„ç†ï¼ˆ<code>wecom.py</code> ä¼ä¸šå¾®ä¿¡ã€<code>telegram.py</code> Telegramï¼‰</p>
<p><strong>æ”¯æŒçš„æ“ä½œ</strong>ï¼š
- é…ç½®ç”Ÿæˆï¼šæ ¹æ®ç”¨æˆ·æè¿°ç”Ÿæˆ YAML ç‰‡æ®µ
- æ—¥å¿—è¯Šæ–­ï¼šç»“åˆæ—¥å¿—å†…å®¹å›ç­”é”™è¯¯åŸå› 
- æ•°æ®æ´å¯Ÿï¼šè°å¼€æ’­ã€è°å‘åšã€å¼€æ’­é¢‘ç‡ç­‰
- å¯æ‰§è¡Œæ“ä½œï¼šå…³é—­/å¼€å¯æŸå¹³å°ç›‘æ§ï¼Œæ·»åŠ /ç§»é™¤ç›‘æ§åˆ—è¡¨é¡¹ï¼ˆéœ€ç”¨æˆ·ç¡®è®¤ï¼‰</p>
<p><strong>ä¾èµ–</strong>ï¼šchromadbã€httpxã€openaiï¼ˆå·²åŒ…å«åœ¨é»˜è®¤ <code>uv sync</code> ä¸­ï¼‰ã€‚</p>
<hr />
<h3 id="14-srcversionpy-">14. src/version.py - ç‰ˆæœ¬ä¿¡æ¯æ¨¡å—<a class="headerlink" href="#14-srcversionpy-" title="Permanent link">&para;</a></h3>
<p><strong>èŒè´£</strong>ï¼šç®¡ç†åº”ç”¨ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ”¯æŒç‰ˆæœ¬æ›´æ–°æ£€æµ‹</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š
- ä» <code>pyproject.toml</code> è¯»å–å½“å‰ç‰ˆæœ¬å·
- æä¾› GitHub ä»“åº“ä¿¡æ¯ï¼ˆç”¨äºæ£€æµ‹æ–°ç‰ˆæœ¬ï¼‰
- ç¼“å­˜ç‰ˆæœ¬å·é¿å…é‡å¤è¯»å–</p>
<p><strong>ç‰ˆæœ¬è·å–æµç¨‹</strong>ï¼š
1. ä¼˜å…ˆä» <code>importlib.metadata.version()</code> è¯»å–ï¼ˆå·²å®‰è£…åŒ…åœºæ™¯ï¼‰
2. å¤±è´¥åˆ™ä» <code>pyproject.toml</code> ç›´æ¥è§£æç‰ˆæœ¬å·
3. ç¼“å­˜åˆ° <code>__version__</code> å˜é‡</p>
<p><strong>å¯¼å‡ºå†…å®¹</strong>ï¼š
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.version</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">__version__</span><span class="p">,</span>          <span class="c1"># å½“å‰ç‰ˆæœ¬å·ï¼Œå¦‚ &quot;2.0.7&quot;</span>
    <span class="n">GITHUB_RELEASES_URL</span><span class="p">,</span>  <span class="c1"># GitHub Tags é¡µé¢ URL</span>
    <span class="n">GITHUB_API_LATEST_TAG</span> <span class="c1"># GitHub API è·å–æœ€æ–° tag çš„ URL</span>
<span class="p">)</span>
</code></pre></div></p>
<p><strong>å‰ç«¯ç‰ˆæœ¬æ£€æµ‹æµç¨‹</strong>ï¼š
1. å‰ç«¯è°ƒç”¨ <code>GET /api/version</code> è·å–å½“å‰ç‰ˆæœ¬å’Œ GitHub API åœ°å€
2. å‰ç«¯è°ƒç”¨ GitHub Tags API è·å–æœ€æ–° tag çš„ <code>name</code>
3. æ¯”è¾ƒç‰ˆæœ¬å·ï¼Œè‹¥æœ‰æ–°ç‰ˆæœ¬åˆ™æ˜¾ç¤ºæ›´æ–°æç¤ºæ¨ªå¹…
4. ç”¨æˆ·å¯ç‚¹å‡»è·³è½¬è‡³ GitHub Tags é¡µé¢æŸ¥çœ‹æ›´æ–°å†…å®¹</p>
<hr />
<h2 id="_8">æ•°æ®æµè®¾è®¡<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<h3 id="_9">ç›‘æ§ä»»åŠ¡æ‰§è¡Œæµç¨‹<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>1. è°ƒåº¦å™¨è§¦å‘ä»»åŠ¡
   â†“
2. ç›‘æ§ä»»åŠ¡åˆå§‹åŒ–
   - åŠ è½½æ•°æ®åº“ä¸­çš„æ—§æ•°æ®
   - åˆå§‹åŒ–æ¨é€æœåŠ¡
   â†“
3. å¹¶å‘è·å–å¹³å°æ•°æ®
   - ä½¿ç”¨ aiohttp è¯·æ±‚å¹³å°API/é¡µé¢
   - è§£æå“åº”æ•°æ®
   â†“
4. æ•°æ®å¯¹æ¯”
   - ä¸æ•°æ®åº“ä¸­çš„æ—§æ•°æ®å¯¹æ¯”
   - æ£€æµ‹å˜åŒ–ï¼ˆæ–°å†…å®¹ã€å¼€æ’­ç­‰ï¼‰
   â†“
5. æ›´æ–°æ•°æ®åº“
   - æ’å…¥æˆ–æ›´æ–°æ•°æ®
   â†“
6. æ¨é€é€šçŸ¥ï¼ˆå¦‚æœ‰å˜åŒ–ï¼‰
   - æ£€æŸ¥å…æ‰“æ‰°æ—¶æ®µ
   - æ„å»ºæ¨é€æ¶ˆæ¯
   - å¹¶å‘å‘é€åˆ°æ‰€æœ‰å¯ç”¨çš„æ¨é€é€šé“
   â†“
7. è®°å½•æ—¥å¿—
</code></pre></div>
<h3 id="_10">å®šæ—¶ä»»åŠ¡æ‰§è¡Œæµç¨‹<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>1. è°ƒåº¦å™¨è§¦å‘ä»»åŠ¡ï¼ˆCronï¼‰
   â†“
2. æ£€æŸ¥å½“å¤©æ˜¯å¦å·²è¿è¡Œï¼ˆskip_if_run_todayï¼‰
   - æŸ¥è¯¢ task_run_history è¡¨
   - å¦‚æœå½“å¤©å·²è¿è¡Œï¼Œè®°å½•æ—¥å¿—å¹¶è·³è¿‡
   â†“
3. ä»»åŠ¡åˆå§‹åŒ–
   - åŠ è½½é…ç½®
   - åˆå§‹åŒ–æ¨é€æœåŠ¡
   â†“
4. æ‰§è¡Œä»»åŠ¡é€»è¾‘
   - ç™»å½•ï¼ˆå¦‚éœ€è¦ï¼‰
   - æ‰§è¡Œç­¾åˆ°/æ¸…ç†ç­‰æ“ä½œ
   â†“
5. æ ‡è®°ä¸ºå·²è¿è¡Œ
   - æ›´æ–° task_run_history è¡¨
   - ä»…åœ¨ä»»åŠ¡æˆåŠŸæ—¶æ ‡è®°
   â†“
6. æ¨é€ç»“æœ
   - æ„å»ºæ¨é€æ¶ˆæ¯
   - å‘é€åˆ°æ¨é€é€šé“
   â†“
7. è®°å½•æ—¥å¿—
</code></pre></div>
<h3 id="_11">é…ç½®çƒ­é‡è½½æµç¨‹<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>1. ConfigWatcher æ£€æµ‹æ–‡ä»¶å˜åŒ–
   â†“
2. é‡æ–°åŠ è½½é…ç½®
   - get_config(reload=True)
   - è§£æYAMLå¹¶éªŒè¯
   â†“
3. æ¯”è¾ƒé…ç½®å˜åŒ–
  - æ£€æµ‹å„ç›‘æ§ enable/é—´éš”ã€å„ä»»åŠ¡ enable/æ‰§è¡Œæ—¶é—´ã€å…æ‰“æ‰°ã€æ¨é€é€šé“ç­‰
  - æ£€æµ‹ `ai_assistant` èŠ‚ç‚¹ï¼ˆYAML åŸå§‹å†…å®¹ï¼‰å˜åŒ–
  - æ£€æµ‹åµŒå¥—é…ç½®ï¼ˆå¤šè´¦å·ã€å¤š Cookie ç­‰ï¼‰å˜åŒ–
  â†“
4. é…ç½®ä¸æ•°æ®åº“åŒæ­¥ï¼ˆsync_config_to_dbï¼‰
  - ä»é…ç½®ä¸­åˆ é™¤çš„ uid/room å¯¹åº”åˆ é™¤æ•°æ®åº“è®°å½•
  â†“
5. æ›´æ–°è°ƒåº¦å™¨
   - æ›´æ–°é—´éš”ä»»åŠ¡çš„é—´éš”æ—¶é—´
   - æ›´æ–°Cronä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´
   - æ›´æ–°å…æ‰“æ‰°æ—¶æ®µé…ç½®
   â†“
6. è®°å½•æ—¥å¿—
</code></pre></div>
<hr />
<h2 id="_12">æ‰©å±•æœºåˆ¶<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<h3 id="_13">æ·»åŠ æ–°ç›‘æ§å¹³å°<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p><strong>æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ›å»ºç›‘æ§æ¨¡å—</strong>ï¼ˆ<code>monitors/new_platform_monitor.py</code>ï¼‰
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.monitor</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseMonitor</span><span class="p">,</span> <span class="n">CookieExpiredError</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_config</span>

<span class="k">class</span><span class="w"> </span><span class="nc">NewPlatformMonitor</span><span class="p">(</span><span class="n">BaseMonitor</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">monitor_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;æ–°å¹³å°ç›‘æ§&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">platform_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;new_platform&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
        <span class="c1"># ç›‘æ§é€»è¾‘</span>
        <span class="k">pass</span>

<span class="c1"># æ³¨å†Œä»»åŠ¡</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.job_registry</span><span class="w"> </span><span class="kn">import</span> <span class="n">register_monitor</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_new_platform_monitor</span><span class="p">():</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">NewPlatformMonitor</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> <span class="k">as</span> <span class="n">monitor</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">monitor</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">register_monitor</span><span class="p">(</span>
    <span class="n">job_id</span><span class="o">=</span><span class="s2">&quot;new_platform_monitor&quot;</span><span class="p">,</span>
    <span class="n">run_func</span><span class="o">=</span><span class="n">run_new_platform_monitor</span><span class="p">,</span>
    <span class="n">get_trigger_kwargs</span><span class="o">=</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">new_platform_interval_seconds</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div></p>
</li>
<li>
<p><strong>åœ¨ <code>job_registry.py</code> ä¸­æ·»åŠ æ¨¡å—è·¯å¾„</strong>
<div class="highlight"><pre><span></span><code><span class="n">MONITOR_MODULES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;monitors.huya_monitor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;monitors.weibo_monitor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;monitors.new_platform_monitor&quot;</span><span class="p">,</span>  <span class="c1"># æ–°å¢</span>
<span class="p">]</span>
</code></pre></div></p>
</li>
<li>
<p><strong>åœ¨ <code>config.py</code> ä¸­æ·»åŠ é…ç½®å­—æ®µ</strong>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AppConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">new_platform_interval_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span>
    <span class="c1"># å…¶ä»–é…ç½®...</span>
</code></pre></div></p>
</li>
<li>
<p><strong>åœ¨ <code>config.py</code> ä¸­æ·»åŠ é…ç½®æ˜ å°„</strong>
<div class="highlight"><pre><span></span><code><span class="n">config_mappings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;new_platform&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;interval_seconds&quot;</span><span class="p">:</span> <span class="s2">&quot;new_platform_interval_seconds&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="c1"># ...</span>
<span class="p">}</span>
</code></pre></div></p>
</li>
</ol>
<h3 id="_14">æ·»åŠ æ–°å®šæ—¶ä»»åŠ¡<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p><strong>æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ›å»ºä»»åŠ¡æ¨¡å—</strong>ï¼ˆ<code>tasks/new_task.py</code>ï¼‰
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.job_registry</span><span class="w"> </span><span class="kn">import</span> <span class="n">register_task</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_config</span><span class="p">,</span> <span class="n">parse_checkin_time</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_new_task</span><span class="p">():</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    <span class="c1"># ä»»åŠ¡é€»è¾‘</span>
    <span class="k">pass</span>

<span class="n">register_task</span><span class="p">(</span>
    <span class="n">job_id</span><span class="o">=</span><span class="s2">&quot;new_task&quot;</span><span class="p">,</span>
    <span class="n">run_func</span><span class="o">=</span><span class="n">run_new_task</span><span class="p">,</span>
    <span class="n">get_trigger_kwargs</span><span class="o">=</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;hour&quot;</span><span class="p">:</span> <span class="n">parse_checkin_time</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">new_task_time</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
        <span class="s2">&quot;minute&quot;</span><span class="p">:</span> <span class="n">parse_checkin_time</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">new_task_time</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre></div></p>
</li>
<li>
<p><strong>åœ¨ <code>job_registry.py</code> ä¸­æ·»åŠ æ¨¡å—è·¯å¾„</strong>
<div class="highlight"><pre><span></span><code><span class="n">TASK_MODULES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;tasks.log_cleanup&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tasks.new_task&quot;</span><span class="p">,</span>  <span class="c1"># æ–°å¢</span>
<span class="p">]</span>
</code></pre></div></p>
</li>
<li>
<p><strong>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®é¡¹</strong>
<div class="highlight"><pre><span></span><code><span class="nt">new_task</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">time</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;08:00&quot;</span>
</code></pre></div></p>
</li>
</ol>
<h3 id="_15">æ·»åŠ æ–°æ¨é€é€šé“<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p><strong>æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ›å»ºæ¨é€é€šé“ç±»</strong>ï¼ˆ<code>src/push_channel/new_channel.py</code>ï¼‰
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">._push_channel</span><span class="w"> </span><span class="kn">import</span> <span class="n">PushChannel</span>

<span class="k">class</span><span class="w"> </span><span class="nc">NewChannel</span><span class="p">(</span><span class="n">PushChannel</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">session</span><span class="p">)</span>
        <span class="c1"># åˆå§‹åŒ–é…ç½®</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">jump_url</span><span class="p">,</span> <span class="n">pic_url</span><span class="p">,</span> <span class="n">extend_data</span><span class="p">):</span>
        <span class="c1"># æ¨é€é€»è¾‘</span>
        <span class="k">pass</span>
</code></pre></div></p>
</li>
<li>
<p><strong>åœ¨ <code>__init__.py</code> ä¸­æ³¨å†Œ</strong>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">.new_channel</span><span class="w"> </span><span class="kn">import</span> <span class="n">NewChannel</span>

<span class="n">_channel_type_to_class</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;new_channel&quot;</span><span class="p">:</span> <span class="n">NewChannel</span><span class="p">,</span>
    <span class="c1"># ...</span>
<span class="p">}</span>
</code></pre></div></p>
</li>
</ol>
<hr />
<h2 id="_16">æŠ€æœ¯æ ˆ<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h2>
<h3 id="_17">æ ¸å¿ƒä¾èµ–<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>åº“å</th>
<th>ç‰ˆæœ¬</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td>Python</td>
<td>&gt;=3.10</td>
<td>ç¼–ç¨‹è¯­è¨€</td>
</tr>
<tr>
<td>aiohttp</td>
<td>&gt;=3.9.0</td>
<td>å¼‚æ­¥HTTPå®¢æˆ·ç«¯</td>
</tr>
<tr>
<td>aiosqlite</td>
<td>&gt;=0.19.0</td>
<td>å¼‚æ­¥SQLiteæ•°æ®åº“</td>
</tr>
<tr>
<td>APScheduler</td>
<td>&gt;=3.10.0</td>
<td>ä»»åŠ¡è°ƒåº¦å™¨</td>
</tr>
<tr>
<td>Pydantic</td>
<td>&gt;=2.5.0</td>
<td>æ•°æ®éªŒè¯å’Œé…ç½®æ¨¡å‹</td>
</tr>
<tr>
<td>FastAPI</td>
<td>&gt;=0.104.0</td>
<td>Webæ¡†æ¶</td>
</tr>
<tr>
<td>Uvicorn</td>
<td>&gt;=0.24.0</td>
<td>ASGIæœåŠ¡å™¨</td>
</tr>
<tr>
<td>PyYAML</td>
<td>&gt;=6.0.0</td>
<td>YAMLè§£æ</td>
</tr>
<tr>
<td>ruamel.yaml</td>
<td>&gt;=0.18.0</td>
<td>YAMLç¼–è¾‘ï¼ˆä¿ç•™æ³¨é‡Šï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="_18">æ¶æ„æ¨¡å¼<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>å¼‚æ­¥IO</strong>ï¼šå…¨é¢ä½¿ç”¨ <code>asyncio</code> å’Œ <code>async/await</code></li>
<li><strong>æ’ä»¶åŒ–æ¶æ„</strong>ï¼šç›‘æ§å’Œä»»åŠ¡é‡‡ç”¨æ’ä»¶åŒ–è®¾è®¡</li>
<li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥é…ç½®å’Œä¼šè¯</li>
<li><strong>å·¥å‚æ¨¡å¼</strong>ï¼šæ¨é€é€šé“é€šè¿‡å·¥å‚å‡½æ•°åˆ›å»º</li>
<li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šæ•°æ®åº“è¿æ¥ã€Cookieç¼“å­˜é‡‡ç”¨å•ä¾‹</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼šé…ç½®ç›‘æ§å™¨è§‚å¯Ÿé…ç½®æ–‡ä»¶å˜åŒ–</li>
</ul>
<hr />
<h2 id="_19">ç›®å½•ç»“æ„<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>WebMoniter/
â”œâ”€â”€ main.py                 # ä¸»å…¥å£
â”œâ”€â”€ config.yml              # é…ç½®æ–‡ä»¶ï¼ˆç”¨æˆ·åˆ›å»ºï¼‰
â”œâ”€â”€ config.yml.sample        # é…ç½®ç¤ºä¾‹æ–‡ä»¶
â”œâ”€â”€ pyproject.toml          # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ uv.lock                 # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ Dockerfile              # Docker é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml      # Docker Compose é…ç½®
â”œâ”€â”€ docker-entrypoint.sh   # å®¹å™¨å…¥å£ï¼šå¯åŠ¨å‰ä¸º data/logs èµ‹äºˆè¯»å†™æƒé™ï¼Œå†å¯åŠ¨ main.py
â”‚
â”œâ”€â”€ src/                    # æ ¸å¿ƒæºä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ config_db_sync.py   # é…ç½®ä¸æ•°æ®åº“åŒæ­¥ï¼ˆçƒ­é‡è½½æ—¶åˆ é™¤å·²ç§»é™¤çš„ uid/roomï¼‰
â”‚   â”œâ”€â”€ config_watcher.py   # é…ç½®ç›‘æ§ï¼ˆçƒ­é‡è½½ï¼Œé»˜è®¤ 5 ç§’è½®è¯¢ï¼‰
â”‚   â”œâ”€â”€ ai_assistant/       # AI åŠ©æ‰‹ï¼ˆRAG + LLMï¼‰
â”‚   â”‚   â”œâ”€â”€ config.py       # AI é…ç½®
â”‚   â”‚   â”œâ”€â”€ rag.py          # å‘é‡æ£€ç´¢
â”‚   â”‚   â”œâ”€â”€ indexer.py      # æ–‡æ¡£ç´¢å¼•æ„å»º
â”‚   â”‚   â”œâ”€â”€ conversation.py # ä¼šè¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ intent_parser.py # å¯æ‰§è¡Œæ„å›¾è§£æ
â”‚   â”‚   â”œâ”€â”€ tools.py        # AI å¯è°ƒç”¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ tools_current_state.py  # å½“å‰çŠ¶æ€æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ prompts.py      # ç³»ç»Ÿæç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ llm_client.py   # LLM å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ platform_chat.py # æ¨é€å¹³å°å¯¹è¯å…¥å£
â”‚   â”‚   â”œâ”€â”€ wecom_crypto.py # ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯åŠ è§£å¯†
â”‚   â”‚   â””â”€â”€ platform_handlers/  # å¹³å°æ¶ˆæ¯å¤„ç†
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ wecom.py    # ä¼ä¸šå¾®ä¿¡
â”‚   â”‚       â””â”€â”€ telegram.py # Telegram
â”‚   â”œâ”€â”€ cookie_cache.py    # Cookieç¼“å­˜ç®¡ç†
â”‚   â”œâ”€â”€ database.py         # æ•°æ®åº“æ“ä½œ
â”‚   â”œâ”€â”€ job_registry.py     # ä»»åŠ¡æ³¨å†Œè¡¨
â”‚   â”œâ”€â”€ ql_compat.py        # é’é¾™é¢æ¿å…¼å®¹ï¼ˆç¯å¢ƒå˜é‡é…ç½®ã€QLAPIï¼‰
â”‚   â”œâ”€â”€ log_manager.py      # æ—¥å¿—ç®¡ç†
â”‚   â”œâ”€â”€ monitor.py          # ç›‘æ§åŸºç±»
â”‚   â”œâ”€â”€ scheduler.py        # ä»»åŠ¡è°ƒåº¦å™¨
â”‚   â”œâ”€â”€ task_tracker.py     # ä»»åŠ¡è¿è¡Œè¿½è¸ªï¼ˆå½“å¤©å·²è¿è¡Œåˆ™è·³è¿‡ï¼‰
â”‚   â”œâ”€â”€ utils.py            # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ version.py          # ç‰ˆæœ¬ä¿¡æ¯ç®¡ç†
â”‚   â”œâ”€â”€ web_server.py       # WebæœåŠ¡å™¨
â”‚   â”‚
â”‚   â””â”€â”€ push_channel/       # æ¨é€é€šé“æ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ _push_channel.py # æ¨é€é€šé“åŸºç±»
â”‚       â”œâ”€â”€ manager.py      # ç»Ÿä¸€æ¨é€ç®¡ç†å™¨
â”‚       â”œâ”€â”€ wecom_apps.py   # ä¼ä¸šå¾®ä¿¡è‡ªå»ºåº”ç”¨
â”‚       â”œâ”€â”€ wecom_bot.py    # ä¼ä¸šå¾®ä¿¡ç¾¤èŠæœºå™¨äºº
â”‚       â”œâ”€â”€ dingtalk_bot.py # é’‰é’‰æœºå™¨äºº
â”‚       â”œâ”€â”€ feishu_apps.py  # é£ä¹¦è‡ªå»ºåº”ç”¨
â”‚       â”œâ”€â”€ feishu_bot.py   # é£ä¹¦æœºå™¨äºº
â”‚       â”œâ”€â”€ telegram_bot.py # Telegramæœºå™¨äºº
â”‚       â”œâ”€â”€ qq_bot.py       # QQé¢‘é“æœºå™¨äºº
â”‚       â”œâ”€â”€ napcat_qq.py    # NapCatQQ
â”‚       â”œâ”€â”€ bark.py         # Bark
â”‚       â”œâ”€â”€ gotify.py       # Gotify
â”‚       â”œâ”€â”€ webhook.py      # Webhook
â”‚       â”œâ”€â”€ email.py        # ç”µå­é‚®ä»¶
â”‚       â”œâ”€â”€ pushplus.py     # PushPlus
â”‚       â”œâ”€â”€ wxpusher.py     # WxPusher
â”‚       â”œâ”€â”€ server_chan_turbo.py  # Serveré…±Turbo
â”‚       â”œâ”€â”€ server_chan_3.py     # Serveré…±3
â”‚       â”œâ”€â”€ demo.py              # æ¼”ç¤ºé€šé“ï¼ˆæµ‹è¯•ç”¨ï¼‰
â”‚       â””â”€â”€ qlapi.py             # é’é¾™ QLAPI æ¨é€
â”‚
â”œâ”€â”€ ql/                     # é’é¾™å•ä»»åŠ¡è„šæœ¬ï¼ˆql/*.pyï¼‰
â”‚
â”œâ”€â”€ monitors/               # ç›‘æ§æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ huya_monitor.py     # è™ç‰™ç›´æ’­ç›‘æ§
â”‚   â”œâ”€â”€ weibo_monitor.py    # å¾®åšç›‘æ§
â”‚   â”œâ”€â”€ bilibili_monitor.py # å“”å“©å“”å“©åŠ¨æ€+ç›´æ’­ç›‘æ§
â”‚   â”œâ”€â”€ douyin_monitor.py   # æŠ–éŸ³ç›´æ’­ç›‘æ§
â”‚   â”œâ”€â”€ douyu_monitor.py    # æ–—é±¼ç›´æ’­ç›‘æ§
â”‚   â””â”€â”€ xhs_monitor.py      # å°çº¢ä¹¦åŠ¨æ€ç›‘æ§
â”‚
â”œâ”€â”€ tasks/                  # å®šæ—¶ä»»åŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ demo_task.py        # ç¤ºä¾‹ä»»åŠ¡
â”‚   â”œâ”€â”€ log_cleanup.py      # æ—¥å¿—æ¸…ç†
â”‚   â”œâ”€â”€ ikuuu_checkin.py    # iKuuuç­¾åˆ°
â”‚   â”œâ”€â”€ tieba_checkin.py    # ç™¾åº¦è´´å§ç­¾åˆ°
â”‚   â”œâ”€â”€ weibo_chaohua_checkin.py  # å¾®åšè¶…è¯ç­¾åˆ°
â”‚   â”œâ”€â”€ rainyun_checkin.py       # é›¨äº‘ç­¾åˆ°ï¼ˆå…¥å£ï¼Œé€»è¾‘åœ¨ rainyun/ å­åŒ…ï¼‰
â”‚   â”œâ”€â”€ rainyun/                 # é›¨äº‘ç­¾åˆ°å­åŒ…ï¼ˆSelenium + ddddocr éªŒè¯ç ã€API ç»­è´¹ã€æœåŠ¡å™¨åˆ°æœŸæ£€æŸ¥ï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config_adapter.py    # é…ç½®é€‚é…
â”‚   â”‚   â”œâ”€â”€ runner.py            # å•è´¦å·ç­¾åˆ°æ‰§è¡Œ
â”‚   â”‚   â”œâ”€â”€ captcha.py           # éªŒè¯ç è¯†åˆ«ï¼ˆddddocrï¼‰
â”‚   â”‚   â”œâ”€â”€ api_client.py        # é›¨äº‘ API å®¢æˆ·ç«¯ï¼ˆç»­è´¹ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ server_manager.py    # æœåŠ¡å™¨åˆ°æœŸæ£€æŸ¥ä¸ç»­è´¹
â”‚   â”‚   â”œâ”€â”€ browser/             # Selenium æµè§ˆå™¨æ“ä½œ
â”‚   â”‚   â”‚   â”œâ”€â”€ session.py
â”‚   â”‚   â”‚   â”œâ”€â”€ pages.py
â”‚   â”‚   â”‚   â”œâ”€â”€ cookies.py
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ enshan_checkin.py        # æ©å±±è®ºå›ç­¾åˆ°
â”‚   â”œâ”€â”€ fg_checkin.py            # å¯Œè´µè®ºå›ç­¾åˆ°
â”‚   â”œâ”€â”€ aliyun_checkin.py        # é˜¿é‡Œäº‘ç›˜ç­¾åˆ°
â”‚   â”œâ”€â”€ smzdm_checkin.py         # ä»€ä¹ˆå€¼å¾—ä¹°ç­¾åˆ°
â”‚   â”œâ”€â”€ zdm_draw.py              # å€¼å¾—ä¹°æ¯æ—¥æŠ½å¥–
â”‚   â”œâ”€â”€ tyyun_checkin.py         # å¤©ç¿¼äº‘ç›˜ç­¾åˆ°
â”‚   â”œâ”€â”€ miui_checkin.py          # å°ç±³ç¤¾åŒºç­¾åˆ°
â”‚   â”œâ”€â”€ iqiyi_checkin.py         # çˆ±å¥‡è‰ºç­¾åˆ°
â”‚   â”œâ”€â”€ lenovo_checkin.py        # è”æƒ³ä¹è±†ç­¾åˆ°
â”‚   â”œâ”€â”€ lbly_checkin.py          # ä¸½å®ä¹å›­ç­¾åˆ°
â”‚   â”œâ”€â”€ pinzan_checkin.py        # å“èµç­¾åˆ°
â”‚   â”œâ”€â”€ dml_checkin.py           # è¾¾ç¾ä¹ä»»åŠ¡
â”‚   â”œâ”€â”€ xiaomao_checkin.py       # å°èŒ…é¢„çº¦ï¼ˆièŒ…å°ï¼‰
â”‚   â”œâ”€â”€ ydwx_checkin.py          # ä¸€ç‚¹ä¸‡è±¡ç­¾åˆ°
â”‚   â”œâ”€â”€ xingkong_checkin.py      # æ˜Ÿç©ºä»£ç†ç­¾åˆ°
â”‚   â”œâ”€â”€ freenom_checkin.py       # Freenom å…è´¹åŸŸåç»­æœŸ
â”‚   â”œâ”€â”€ weather_push.py          # å¤©æ°”æ¯æ—¥æ¨é€
â”‚   â”œâ”€â”€ qtw_checkin.py           # åƒå›¾ç½‘ç­¾åˆ°
â”‚   â”œâ”€â”€ kuake_checkin.py         # å¤¸å…‹ç½‘ç›˜ç­¾åˆ°
â”‚   â”œâ”€â”€ kjwj_checkin.py          # ç§‘æŠ€ç©å®¶ç­¾åˆ°
â”‚   â”œâ”€â”€ fr_checkin.py            # å¸†è½¯ç¤¾åŒºç­¾åˆ° + æ‘‡æ‘‡ä¹
â”‚   â”œâ”€â”€ nine_nine_nine_task.py   # 999 ä¼šå‘˜ä¸­å¿ƒå¥åº·æ‰“å¡ä»»åŠ¡
â”‚   â”œâ”€â”€ zgfc_draw.py             # ä¸­å›½ç¦å½©æŠ½å¥–æ´»åŠ¨
â”‚   â””â”€â”€ ssq_500w_notice.py       # åŒè‰²çƒå¼€å¥–é€šçŸ¥ï¼ˆå®ˆå·æ£€æµ‹ + å†·å·æœºé€‰ï¼‰
â”‚
â”œâ”€â”€ web/                    # Webå‰ç«¯èµ„æº
â”‚   â”œâ”€â”€ static/             # é™æ€æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ js/
â”‚   â””â”€â”€ templates/          # Jinja2æ¨¡æ¿
â”‚       â”œâ”€â”€ login.html
â”‚       â”œâ”€â”€ config.html     # é…ç½®ç®¡ç†ï¼ˆç™»å½•åé»˜è®¤é¦–é¡µï¼‰
â”‚       â”œâ”€â”€ dashboard.html  # å¤‡ç”¨æ§åˆ¶å°æ¨¡æ¿
â”‚       â”œâ”€â”€ tasks.html      # ä»»åŠ¡ç®¡ç†
â”‚       â”œâ”€â”€ data.html
â”‚       â””â”€â”€ logs.html
â”‚
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”‚   â”œâ”€â”€ index.md            # æ–‡æ¡£é¦–é¡µ
â”‚   â”œâ”€â”€ API.md              # API æ–‡æ¡£
â”‚   â”œâ”€â”€ ARCHITECTURE.md     # æ¶æ„æ–‡æ¡£ï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”‚   â”œâ”€â”€ SECONDARY_DEVELOPMENT.md  # äºŒæ¬¡å¼€å‘æŒ‡å—
â”‚   â”œâ”€â”€ QINGLONG.md         # é’é¾™é¢æ¿å…¼å®¹æŒ‡å—
â”‚   â”œâ”€â”€ installation.md     # å®‰è£…è¯´æ˜
â”‚   â”œâ”€â”€ faq.md              # å¸¸è§é—®é¢˜
â”‚   â””â”€â”€ guides/             # ä½¿ç”¨æŒ‡å—
â”‚       â”œâ”€â”€ ai-assistant.md # AI åŠ©æ‰‹ä½¿ç”¨æŒ‡å—
â”‚       â”œâ”€â”€ config.md       # é…ç½®è¯´æ˜
â”‚       â”œâ”€â”€ push-channels.md # æ¨é€é€šé“é…ç½®
â”‚       â”œâ”€â”€ tasks.md        # ä»»åŠ¡è¯´æ˜
â”‚       â”œâ”€â”€ web-ui.md       # Web ç•Œé¢è¯´æ˜
â”‚       â””â”€â”€ tasks/          # ä»»åŠ¡ç›¸å…³
â”‚           â”œâ”€â”€ checkin.md  # ç­¾åˆ°ä»»åŠ¡è¯¦è§£
â”‚           â””â”€â”€ monitors.md # ç›‘æ§ä»»åŠ¡è¯¦è§£
â”‚
â”œâ”€â”€ data/                   # æ•°æ®ç›®å½•ï¼ˆè¿è¡Œæ—¶åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ data.db             # SQLiteæ•°æ®åº“
â”‚   â”œâ”€â”€ cookie_cache.json   # Cookieç¼“å­˜
â”‚   â”œâ”€â”€ auth.json           # Web ç™»å½•å‡­æ®
â”‚   â”œâ”€â”€ ai_assistant_conversations.json  # AI åŠ©æ‰‹ä¼šè¯ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ ai_assistant_chroma/ # Chroma å‘é‡åº“ï¼ˆå¯é€‰ï¼ŒAI åŠ©æ‰‹å¯ç”¨æ—¶ï¼‰
â”‚
â””â”€â”€ logs/                   # æ—¥å¿—ç›®å½•ï¼ˆè¿è¡Œæ—¶åˆ›å»ºï¼‰
    â”œâ”€â”€ main_*.log          # æ€»æ—¥å¿—ï¼ˆæŒ‰æ—¥æœŸï¼‰
    â””â”€â”€ task_*.log         # å„ä»»åŠ¡ä¸“å±æ—¥å¿—ï¼ˆtask_{job_id}_YYYYMMDD.logï¼‰
</code></pre></div>
<hr />
<h2 id="_20">å…³é”®è®¾è®¡æ¨¡å¼<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h2>
<h3 id="1">1. æ’ä»¶åŒ–æ¶æ„<a class="headerlink" href="#1" title="Permanent link">&para;</a></h3>
<p><strong>å®ç°</strong>ï¼šé€šè¿‡ <code>job_registry</code> æ¨¡å—ï¼ˆ<code>discover_and_import()</code>ã€<code>MONITOR_MODULES</code>ã€<code>TASK_MODULES</code>ï¼‰å®ç°ä»»åŠ¡çš„è‡ªåŠ¨å‘ç°å’Œæ³¨å†Œã€‚<strong>é’é¾™é¢æ¿</strong> ä¸‹é€šè¿‡ <code>ql/*.py</code> å•ä»»åŠ¡è„šæœ¬ + ç¯å¢ƒå˜é‡ + <code>ql_compat</code> æ¨¡å—å®ç°å…¼å®¹ï¼Œä¸ä¸»æµç¨‹è§£è€¦ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š
- æ–°å¢ä»»åŠ¡åªéœ€æ·»åŠ æ¨¡å—è·¯å¾„ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç 
- ä»»åŠ¡æ¨¡å—ç‹¬ç«‹ï¼Œæ˜“äºç»´æŠ¤å’Œæµ‹è¯•
- æ”¯æŒåŠ¨æ€åŠ è½½å’Œå¸è½½ä»»åŠ¡</p>
<h3 id="2">2. å·¥å‚æ¨¡å¼<a class="headerlink" href="#2" title="Permanent link">&para;</a></h3>
<p><strong>å®ç°</strong>ï¼šæ¨é€é€šé“é€šè¿‡ <code>get_push_channel()</code> å·¥å‚å‡½æ•°åˆ›å»º</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š
- ç»Ÿä¸€åˆ›å»ºæ¥å£ï¼Œéšè—å…·ä½“å®ç°
- æ˜“äºæ‰©å±•æ–°çš„æ¨é€é€šé“
- æ”¯æŒé…ç½®é©±åŠ¨çš„é€šé“é€‰æ‹©</p>
<h3 id="3">3. å•ä¾‹æ¨¡å¼<a class="headerlink" href="#3" title="Permanent link">&para;</a></h3>
<p><strong>å®ç°</strong>ï¼š
- æ•°æ®åº“è¿æ¥ï¼šå…¨å±€ <code>_shared_connection</code>
- Cookieç¼“å­˜ï¼šå…¨å±€ <code>cookie_cache</code> å®ä¾‹</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š
- é¿å…èµ„æºæµªè´¹ï¼ˆè¿æ¥å¤ç”¨ï¼‰
- ä¿è¯çŠ¶æ€ä¸€è‡´æ€§</p>
<h3 id="4">4. è§‚å¯Ÿè€…æ¨¡å¼<a class="headerlink" href="#4" title="Permanent link">&para;</a></h3>
<p><strong>å®ç°</strong>ï¼š<code>ConfigWatcher</code> è§‚å¯Ÿé…ç½®æ–‡ä»¶å˜åŒ–</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š
- è§£è€¦é…ç½®å˜åŒ–å’Œä¸šåŠ¡é€»è¾‘
- æ”¯æŒé…ç½®çƒ­é‡è½½
- æ˜“äºæ‰©å±•é…ç½®å˜åŒ–å¤„ç†</p>
<h3 id="5">5. æ¨¡æ¿æ–¹æ³•æ¨¡å¼<a class="headerlink" href="#5" title="Permanent link">&para;</a></h3>
<p><strong>å®ç°</strong>ï¼š<code>BaseMonitor</code> å®šä¹‰ç›‘æ§æµç¨‹æ¨¡æ¿</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š
- ç»Ÿä¸€ç›‘æ§ä»»åŠ¡çš„ç»“æ„
- å­ç±»åªéœ€å®ç°å…·ä½“é€»è¾‘
- å‡å°‘ä»£ç é‡å¤</p>
<hr />
<h2 id="_21">é…ç½®ç®¡ç†<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h2>
<h3 id="_22">é…ç½®æ–‡ä»¶ç»“æ„<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<p>é…ç½®æ–‡ä»¶é‡‡ç”¨YAMLæ ¼å¼ï¼Œæ”¯æŒåµŒå¥—ç»“æ„å’Œæ³¨é‡Šï¼š</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ç›‘æ§é…ç½®ï¼ˆç¤ºä¾‹ï¼šå¾®åšã€è™ç‰™ï¼Œå„ä»»åŠ¡å¯é…ç½® monitor_interval_seconds ä¸ push_channelsï¼‰</span>
<span class="nt">weibo</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">   </span><span class="c1"># æ˜¯å¦å¯ç”¨ï¼Œé»˜è®¤ trueï¼›è®¾ä¸º false æ—¶ä»»åŠ¡æš‚åœ</span>
<span class="w">  </span><span class="nt">cookie</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;xxx&quot;</span>
<span class="w">  </span><span class="nt">uids</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;123,456&quot;</span>
<span class="w">  </span><span class="nt">concurrency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">monitor_interval_seconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>

<span class="nt">huya</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">rooms</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;123,456&quot;</span>
<span class="w">  </span><span class="nt">concurrency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">  </span><span class="nt">monitor_interval_seconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">65</span>

<span class="c1"># æ¨é€é€šé“é…ç½®ï¼ˆæ¯ä¸ªä»»åŠ¡å¯é€šè¿‡ push_channels å­—æ®µé€‰æ‹©ä½¿ç”¨å“ªäº›é€šé“ï¼‰</span>
<span class="nt">push_channel</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ä¼ä¸šå¾®ä¿¡&quot;</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wecom_apps</span>
<span class="w">    </span><span class="c1"># ...</span>
</code></pre></div>
<h3 id="_23">é…ç½®åŠ è½½æµç¨‹<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>è¯»å–YAMLæ–‡ä»¶</strong>ï¼š<code>load_config_from_yml()</code></li>
<li><strong>æ‰å¹³åŒ–è½¬æ¢</strong>ï¼šåµŒå¥—ç»“æ„ â†’ æ‰å¹³å­—æ®µ</li>
<li><strong>PydanticéªŒè¯</strong>ï¼šåˆ›å»º <code>AppConfig</code> å®ä¾‹</li>
<li><strong>ç¼“å­˜é…ç½®</strong>ï¼šé¿å…é‡å¤è¯»å–</li>
</ol>
<h3 id="_24">é…ç½®çƒ­é‡è½½<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>æ£€æµ‹æœºåˆ¶</strong>ï¼š<code>ConfigWatcher</code> æ¯5ç§’æ£€æŸ¥æ–‡ä»¶ä¿®æ”¹æ—¶é—´</li>
<li><strong>å˜åŒ–æ£€æµ‹</strong>ï¼šæ¯”è¾ƒå…³é”®é…ç½®å­—æ®µï¼ˆå„ç›‘æ§ enable/é—´éš”ã€å„ä»»åŠ¡ enable/æ‰§è¡Œæ—¶é—´ã€å…æ‰“æ‰°ã€æ¨é€é€šé“ç­‰ï¼‰</li>
<li><strong>æ›´æ–°æœºåˆ¶</strong>ï¼šæ›´æ–°è°ƒåº¦å™¨ä»»åŠ¡å‚æ•°ï¼ˆé—´éš”ä»»åŠ¡é—´éš”ã€Cron æ‰§è¡Œæ—¶é—´ã€æš‚åœ/æ¢å¤ï¼‰</li>
<li><strong>ç”Ÿæ•ˆæ—¶é—´</strong>ï¼šçº¦5ç§’å†…ç”Ÿæ•ˆ</li>
</ul>
<hr />
<h2 id="_25">æ•°æ®åº“è®¾è®¡<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h2>
<h3 id="_26">æ•°æ®åº“é€‰æ‹©<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>SQLite</strong>ï¼šè½»é‡çº§ã€æ— éœ€å•ç‹¬æœåŠ¡ã€é€‚åˆå•æœºéƒ¨ç½²</li>
<li><strong>WALæ¨¡å¼</strong>ï¼šæé«˜å¹¶å‘æ€§èƒ½</li>
<li><strong>å¼‚æ­¥æ“ä½œ</strong>ï¼šä½¿ç”¨ <code>aiosqlite</code> æ”¯æŒå¼‚æ­¥IO</li>
</ul>
<h3 id="_27">è¡¨ç»“æ„<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<p><strong>weiboè¡¨</strong>ï¼š
- <code>UID</code>ï¼šç”¨æˆ·IDï¼ˆä¸»é”®ï¼‰
- <code>ç”¨æˆ·å</code>ï¼šç”¨æˆ·æ˜µç§°
- <code>è®¤è¯ä¿¡æ¯</code>ï¼šè®¤è¯æ ‡è¯†
- <code>ç®€ä»‹</code>ï¼šç”¨æˆ·ç®€ä»‹
- <code>ç²‰ä¸æ•°</code>ï¼šç²‰ä¸æ•°é‡
- <code>å¾®åšæ•°</code>ï¼šå¾®åšæ•°é‡
- <code>æ–‡æœ¬</code>ï¼šæœ€æ–°å¾®åšå†…å®¹
- <code>mid</code>ï¼šå¾®åšID</p>
<p><strong>huyaè¡¨</strong>ï¼š
- <code>room</code>ï¼šæˆ¿é—´å·ï¼ˆä¸»é”®ï¼‰
- <code>name</code>ï¼šä¸»æ’­åç§°
- <code>is_live</code>ï¼šç›´æ’­çŠ¶æ€ï¼ˆ"1"=ç›´æ’­ä¸­ï¼Œ"0"=æœªå¼€æ’­ï¼‰</p>
<p><strong>bilibili_dynamicè¡¨</strong>ï¼ˆB ç«™åŠ¨æ€ï¼‰ï¼š
- <code>uid</code>ï¼šUP ä¸» UIDï¼ˆä¸»é”®ï¼‰
- <code>uname</code>ï¼šUP ä¸»æ˜µç§°
- <code>dynamic_id</code>ï¼šæœ€è¿‘ä¸€æ¡åŠ¨æ€ ID
- <code>dynamic_text</code>ï¼šæœ€è¿‘ä¸€æ¡åŠ¨æ€çš„æ–‡æœ¬å†…å®¹</p>
<p><strong>bilibili_liveè¡¨</strong>ï¼ˆB ç«™ç›´æ’­ï¼‰ï¼š
- <code>uid</code>ï¼šUP ä¸» UIDï¼ˆä¸»é”®ï¼‰
- <code>uname</code>ï¼šUP ä¸»æ˜µç§°
- <code>room_id</code>ï¼šç›´æ’­é—´æˆ¿é—´å·
- <code>is_live</code>ï¼šç›´æ’­çŠ¶æ€</p>
<p><strong>douyinè¡¨</strong>ï¼š
- <code>douyin_id</code>ï¼šæŠ–éŸ³å·ï¼ˆä¸»é”®ï¼‰
- <code>name</code>ï¼šç”¨æˆ·å
- <code>is_live</code>ï¼šç›´æ’­çŠ¶æ€</p>
<p><strong>douyuè¡¨</strong>ï¼š
- <code>room</code>ï¼šæˆ¿é—´å·ï¼ˆä¸»é”®ï¼‰
- <code>name</code>ï¼šä¸»æ’­åç§°
- <code>is_live</code>ï¼šç›´æ’­çŠ¶æ€</p>
<p><strong>xhsè¡¨</strong>ï¼ˆå°çº¢ä¹¦ï¼‰ï¼š
- <code>profile_id</code>ï¼šç”¨æˆ· profile_idï¼ˆä¸»é”®ï¼‰
- <code>user_name</code>ï¼šç”¨æˆ·å
- <code>latest_note_title</code>ï¼šæœ€è¿‘ä¸€æ¡ç¬”è®°æ ‡é¢˜</p>
<p><strong>task_run_historyè¡¨</strong>ï¼ˆå®šæ—¶ä»»åŠ¡è¿è¡Œè®°å½•ï¼‰ï¼š
- <code>job_id</code>ï¼šä»»åŠ¡IDï¼ˆä¸»é”®ï¼‰
- <code>last_run_date</code>ï¼šæœ€åè¿è¡Œæ—¥æœŸï¼ˆISOæ ¼å¼ï¼Œå¦‚ "2025-02-04"ï¼‰</p>
<blockquote>
<p>è¯¥è¡¨ç”± <code>src/task_tracker.py</code> åœ¨é¦–æ¬¡ä½¿ç”¨æ—¶åˆ›å»ºï¼Œç”¨äºå®ç°"å½“å¤©å·²è¿è¡Œåˆ™è·³è¿‡"åŠŸèƒ½ï¼Œé¿å…å®šæ—¶ä»»åŠ¡åœ¨ç¨‹åºé‡å¯æˆ–å®šæ—¶è§¦å‘æ—¶é‡å¤æ‰§è¡Œã€‚</p>
</blockquote>
<h3 id="_28">è¿æ¥ç®¡ç†<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>å…±äº«è¿æ¥</strong>ï¼šå¤šä¸ª <code>AsyncDatabase</code> å®ä¾‹å…±äº«åŒä¸€è¿æ¥</li>
<li><strong>å¼•ç”¨è®¡æ•°</strong>ï¼šè·Ÿè¸ªè¿æ¥ä½¿ç”¨æƒ…å†µ</li>
<li><strong>å¥åº·æ£€æŸ¥</strong>ï¼šè‡ªåŠ¨æ£€æµ‹è¿æ¥å¤±æ•ˆ</li>
<li><strong>è‡ªåŠ¨é‡è¿</strong>ï¼šè¿æ¥å¤±æ•ˆæ—¶è‡ªåŠ¨é‡å»º</li>
</ul>
<hr />
<h2 id="_29">æ¨é€é€šé“æ¶æ„<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h2>
<h3 id="_30">ç»Ÿä¸€æ¨é€æ¥å£<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h3>
<p>æ‰€æœ‰æ¨é€é€šé“å®ç°ç»Ÿä¸€çš„ <code>PushChannel</code> æ¥å£ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PushChannel</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">jump_url</span><span class="p">,</span> <span class="n">pic_url</span><span class="p">,</span> <span class="n">extend_data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;æ¨é€æ¶ˆæ¯&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div>
<h3 id="_31">æ¨é€ç®¡ç†å™¨<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h3>
<p><code>UnifiedPushManager</code> ç®¡ç†å¤šä¸ªæ¨é€é€šé“ï¼š</p>
<ul>
<li><strong>å¹¶å‘æ¨é€</strong>ï¼šåŒæ—¶å‘é€åˆ°æ‰€æœ‰å¯ç”¨çš„é€šé“</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå•ä¸ªé€šé“å¤±è´¥ä¸å½±å“å…¶ä»–é€šé“</li>
<li><strong>é€šé“è¿‡æ»¤</strong>ï¼šåªå‘é€åˆ° <code>enable=true</code> çš„é€šé“</li>
</ul>
<h3 id="_32">æ¨é€æµç¨‹<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h3>
<ol>
<li>æ„å»ºæ¨é€æ¶ˆæ¯ï¼ˆæ ‡é¢˜ã€å†…å®¹ã€é“¾æ¥ã€å›¾ç‰‡ï¼‰</li>
<li>æ£€æŸ¥å…æ‰“æ‰°æ—¶æ®µ</li>
<li>å¹¶å‘å‘é€åˆ°æ‰€æœ‰å¯ç”¨çš„é€šé“</li>
<li>æ”¶é›†æ¨é€ç»“æœå’Œé”™è¯¯</li>
<li>è®°å½•æ—¥å¿—</li>
</ol>
<hr />
<h2 id="web_1">WebæœåŠ¡æ¶æ„<a class="headerlink" href="#web_1" title="Permanent link">&para;</a></h2>
<h3 id="_33">æŠ€æœ¯æ ˆ<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>FastAPI</strong>ï¼šç°ä»£ã€å¿«é€Ÿçš„Webæ¡†æ¶</li>
<li><strong>Jinja2</strong>ï¼šæ¨¡æ¿å¼•æ“</li>
<li><strong>Uvicorn</strong>ï¼šASGIæœåŠ¡å™¨</li>
</ul>
<h3 id="_34">è·¯ç”±è®¾è®¡<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>é¡µé¢è·¯ç”±</strong>ï¼šè¿”å› HTML é¡µé¢ï¼ˆé…ç½®ã€ä»»åŠ¡ç®¡ç†ã€æ•°æ®ã€æ—¥å¿—ï¼‰</li>
<li><strong>APIè·¯ç”±</strong>ï¼šè¿”å› JSON æ•°æ®ï¼ˆé…ç½®ã€ä»»åŠ¡ã€æ•°æ®ã€æ—¥å¿—ã€ç›‘æ§çŠ¶æ€ã€ç‰ˆæœ¬ä¿¡æ¯ï¼‰</li>
</ul>
<h3 id="_35">è®¤è¯æœºåˆ¶<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Sessionè®¤è¯</strong>ï¼šåŸºäº <code>SessionMiddleware</code></li>
<li><strong>ç™»å½•éªŒè¯</strong>ï¼šç”¨æˆ·åå¯†ç éªŒè¯ï¼ˆé»˜è®¤ <code>admin/123</code>ï¼‰</li>
<li><strong>ä¼šè¯ç®¡ç†</strong>ï¼š<code>active_sessions</code> é›†åˆç®¡ç†æ´»è·ƒä¼šè¯</li>
</ul>
<h3 id="api">APIè®¾è®¡<a class="headerlink" href="#api" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>RESTfulé£æ ¼</strong>ï¼šèµ„æºå¯¼å‘çš„URLè®¾è®¡</li>
<li><strong>ç»Ÿä¸€å“åº”æ ¼å¼</strong>ï¼šJSONæ ¼å¼å“åº”</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šHTTPçŠ¶æ€ç  + é”™è¯¯æ¶ˆæ¯</li>
</ul>
<hr />
<h2 id="_36">æ€»ç»“<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h2>
<p>Webä»»åŠ¡ç³»ç»Ÿé‡‡ç”¨<strong>æ¨¡å—åŒ–ã€æ’ä»¶åŒ–ã€å¼‚æ­¥IO</strong>çš„æ¶æ„è®¾è®¡ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>é«˜å¯æ‰©å±•æ€§</strong>ï¼šæ–°å¢ç›‘æ§æˆ–ä»»åŠ¡åªéœ€æ·»åŠ æ¨¡å—ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç </li>
<li><strong>é…ç½®çƒ­é‡è½½</strong>ï¼šä¿®æ”¹é…ç½®æ— éœ€é‡å¯ï¼Œ5ç§’å†…è‡ªåŠ¨ç”Ÿæ•ˆ</li>
<li><strong>å¼‚æ­¥é«˜æ€§èƒ½</strong>ï¼šå…¨é¢ä½¿ç”¨å¼‚æ­¥IOï¼Œæ”¯æŒé«˜å¹¶å‘</li>
<li><strong>ç»Ÿä¸€æ¨é€</strong>ï¼šæ”¯æŒ 15+ ç§æ¨é€é€šé“ï¼Œç»Ÿä¸€ç®¡ç†</li>
<li><strong>Webç®¡ç†</strong>ï¼šæä¾›å‹å¥½çš„Webç•Œé¢è¿›è¡Œé…ç½®å’Œæ•°æ®ç®¡ç†</li>
</ol>
<p>è¯¥æ¶æ„è®¾è®¡ä½¿å¾—ç³»ç»Ÿæ˜“äºç»´æŠ¤ã€æ‰©å±•å’Œéƒ¨ç½²ï¼Œé€‚åˆä¸ªäººå’Œå°å›¢é˜Ÿä½¿ç”¨ã€‚</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  å›åˆ°é¡µé¢é¡¶éƒ¨
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; FY Â· MIT License
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/666fy666/WebMoniter" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>