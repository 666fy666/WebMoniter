# Web任务系统配置文件
#
# 使用方法：
# 1. 复制此文件为 config.yml: cp config.yml.sample config.yml
# 2. 根据实际情况修改 config.yml 中的配置项
# 3. 修改后无需重启，系统支持配置热重载（约 5 秒内生效）

# =============================================================================
# 微博监控配置
# =============================================================================
# 获取 Cookie：登录微博网页版 → 打开开发者工具(F12) → Network 中任意请求复制 Cookie 请求头
# 获取 UID：访问用户主页，URL 中数字即为 UID，例如 https://weibo.com/u/1234567890 → UID 为 1234567890
weibo:
  cookie: your_weibo_cookie  # 从浏览器开发者工具获取
  uids: uid1,uid2,uid3  # 逗号分隔的 UID 列表
  concurrency: 2  # 并发数，建议 2-5（避免触发限流）
  push_channels: []  # 推送通道名称列表（可多选），为空时使用全部已配置的通道，如 [企业微信应用, 钉钉机器人, 飞书机器人, WxPusher]

# =============================================================================
# 微博超话签到配置（须包含 XSRF-TOKEN，支持多 Cookie）
# =============================================================================
# Cookie：浏览器打开微博，F12 控制台执行 document.cookie 获取
# 多 Cookie：配置 cookies 列表后优先使用，每项为完整 Cookie 字符串，会对每个 Cookie 依次签到并分别推送
# 签到时间：默认每天 23:45；enable: true 且配置完整时，项目启动时也会执行一次
weibo_chaohua:
  enable: false  # 是否启用微博超话签到
  cookie:  # 单 Cookie（多 Cookie 时可不填）
  # cookies:
  #   - "SCF=xxx; XSRF-TOKEN=xxx; SUB=xxx; ..."
  #   - "SCF=yyy; XSRF-TOKEN=yyy; SUB=yyy; ..."
  time: "23:45"  # 签到时间（24 小时制 HH:MM），默认 23:45
  push_channels: []  # 推送通道名称列表（可多选），为空时使用全部已配置的通道

# =============================================================================
# 虎牙监控配置
# =============================================================================
# 获取房间号：从虎牙直播间 URL 获取，例如 https://www.huya.com/123456 → 房间号为 123456
huya:
  rooms: room1,room2,room3  # 逗号分隔的房间号列表
  concurrency: 5  # 并发数，建议 5-10
  push_channels: []  # 推送通道名称列表（可多选），为空时使用全部已配置的通道

# =============================================================================
# iKuuu 签到配置
# =============================================================================
# 域名自动从 ikuuu.club 发现，无需手动配置
# 按配置每天固定时间（默认 08:00）自动签到，项目启动时也会执行一次（enable: true 且配置完整时）
# 多账号：配置 accounts 列表，每项包含 email、password，会对每个账号依次登录、签到并分别推送；不配置时使用单账号 email/password
checkin:
  enable: false  # 是否启用每日签到
  email:  # 单账号登录邮箱（多账号时可不填）
  password:  # 单账号登录密码
  # accounts:  # 多账号，配置后优先于单账号
  #   - email: user1@example.com
  #     password: pass1
  #   - email: user2@example.com
  #     password: pass2
  time: "08:00"  # 签到时间（24 小时制 HH:MM），默认每天早上 8 点
  push_channels: []  # 推送通道名称列表（可多选），为空时使用全部已配置的通道

# =============================================================================
# 雨云签到配置（使用 API Key）
# =============================================================================
# 获取 API Key：登录雨云 → 总览 → 用户 → 账户设置 → API 密钥
# 按配置每天固定时间（默认 08:30）自动签到，项目启动时也会执行一次（enable: true 且配置了 API Key 时）
# 签到需通过腾讯验证码验证，系统会自动完成
# 多 API Key：配置 api_keys 列表后优先使用，会对每个 API Key 依次签到并分别推送
rainyun:
  enable: false  # 是否启用雨云签到
  api_key:  # 单 API Key（与 api_keys 二选一）
  # api_keys:  # 多 API Key 列表，非空时优先于 api_key
  #   - key1
  #   - key2
  time: "08:30"  # 签到时间（24 小时制 HH:MM），默认 08:30
  push_channels: []  # 推送通道名称列表（可多选），为空时使用全部已配置的通道

# =============================================================================
# 百度贴吧签到配置（须包含 BDUSS，支持多 Cookie）
# =============================================================================
# Cookie：须包含 BDUSS，浏览器登录贴吧后 F12 控制台执行 document.cookie 获取
# 多 Cookie：配置 cookies 列表后优先使用，每项为完整 Cookie，会对每个 Cookie 依次签到并分别推送
# 签到时间：默认每天 08:10；enable: true 且配置了 Cookie 时，项目启动时也会执行一次
# 推送：签到结果通过下方 push_channel 发送，受免打扰时段控制
tieba:
  enable: false  # 是否启用贴吧签到
  cookie:  # 单 Cookie（多 Cookie 时可不填）
  # cookies:
  #   - "BIDUPSID=xxx; BDUSS=xxx; ..."
  #   - "BIDUPSID=yyy; BDUSS=yyy; ..."
  time: "08:10"  # 签到时间（24 小时制 HH:MM），默认 08:10
  push_channels: []  # 推送通道名称列表（可多选），为空时使用全部已配置的通道

# =============================================================================
# 调度器配置
# =============================================================================
# 监控间隔与定时任务执行时间，修改后热重载生效，无需重启
scheduler:
  huya_monitor_interval_seconds: 65  # 虎牙监控间隔（秒），默认 65
  weibo_monitor_interval_seconds: 300  # 微博监控间隔（秒），默认 300（5 分钟）
  cleanup_logs_hour: 2  # 日志清理执行时间（小时），默认 2 点
  cleanup_logs_minute: 0  # 日志清理执行时间（分钟），默认 0 分
  retention_days: 3  # 日志保留天数，默认 3 天

# =============================================================================
# 免打扰时段配置
# =============================================================================
# 启用后，在指定时间段内静默运行：监控任务会正常执行并更新数据库，但不会推送通知（日志中仍会记录）
# 支持跨天设置，例如 start: "22:00" end: "08:00" 表示晚 10 点到早 8 点不推送
# ⚠️ 免打扰时段内可能遗漏重要消息，请谨慎使用
quiet_hours:
  enable: false  # 是否启用免打扰时段
  start: "03:00"  # 开始时间（24 小时制 HH:MM）
  end: "08:00"  # 结束时间（24 小时制 HH:MM）

# =============================================================================
# 插件/扩展任务配置（供二次开发使用，详见 docs/SECONDARY_DEVELOPMENT.md）
# =============================================================================
# 新增定时任务可使用 plugins.xxx 配置；不需要 demo_task 可删除此块，并在 src/job_registry.TASK_MODULES 中移除 tasks.demo_task
plugins:
  demo_task:
    enable: false
    time: "08:30"  # 执行时间 HH:MM
    message: "Demo 定时任务执行完成"

# =============================================================================
# 推送通道配置
# =============================================================================
# 支持配置多个推送通道。每个通道需设置：name（唯一）、type，以及该 type 所需的其他字段
# 通道类型与说明见 README「推送通道支持」表格
# 每个任务可在其配置中通过 push_channels 字段选择使用哪些通道（按 name 匹配），为空时使用全部已配置的通道
push_channel:
  # Server酱 Turbo
  - name: Server酱_Turbo
    type: serverChan_turbo
    send_key:
  # Server酱 3
  - name: Server酱_3
    type: serverChan_3
    send_key:
    uid:
    tags:
  # 企业微信应用
  - name: 企业微信应用
    type: wecom_apps
    corp_id:
    agent_id:
    corp_secret:
    touser: "@all"  # 接收消息的用户ID，多个用户用竖线分隔，@all表示所有人
  # 企业微信机器人
  - name: 企业微信机器人
    type: wecom_bot
    key:
  # 钉钉机器人
  - name: 钉钉机器人
    type: dingtalk_bot
    access_token:  # 机器人访问令牌
    secret:  # 可选：加签密钥（SEC开头的字符串），如果配置了secret则使用加签方式，否则使用普通方式
  # 飞书自建应用
  - name: 飞书自建应用
    type: feishu_apps
    app_id:
    app_secret:
    receive_id_type:
    receive_id:
  # 飞书机器人
  - name: 飞书机器人
    type: feishu_bot
    webhook_key:  # 机器人Webhook Key
    sign_secret:  # 可选：签名密钥，如果配置了sign_secret则使用签名校验方式，否则使用普通方式
  # Telegram机器人
  - name: Telegram机器人
    type: telegram_bot
    api_token:
    chat_id:
  # QQ机器人（不推荐，需要使用app_secret获取AccessToken鉴权）
  - name: QQ机器人
    type: qq_bot
    base_url: https://api.sgroup.qq.com
    app_id:  # 机器人应用的App ID
    app_secret:  # 机器人应用的App Secret（用于获取AccessToken）
    # 注意：QQ开放平台已禁用固定Token，必须使用app_secret获取AccessToken
    push_target_list:
      - guild_name: "频道1"
        channel_name_list:
          - "子频道11"
          - "子频道12"
  # NapCatQQ
  - name: NapCatQQ
    type: napcat_qq
    api_url: http://localhost:3000
    token:
    user_id:
    group_id:
    at_qq: "all"
  # Bark
  - name: Bark
    type: bark
    server_url: https://api.day.app
    key:
  # Gotify
  - name: Gotify
    type: gotify
    web_server_url:
  # Webhook
  - name: Webhook
    type: webhook
    webhook_url: https://xxx.com?title={{title}}&content={{content}}
    request_method: GET
  # PushPlus
  - name: PushPlus
    type: pushplus
    token:
    channel: wechat  # 推送渠道，可选值：wechat(微信)、mail(邮件)、webhook(Webhook)、cp(企业微信)、sms(短信)等
    topic:  # 群组代码，可选，用于群组推送
    template: html  # 消息模板，可选值：html、txt、json、markdown等，默认html
    to:  # 好友消息的接收者标识，可选
  # Email
  - name: Email
    type: email
    smtp_host:
    smtp_port:
    smtp_ssl: true
    smtp_tls: false
    sender_email:
    sender_password:
    receiver_email:
  # WxPusher
  - name: WxPusher
    type: wxpusher
    app_token:  # 应用令牌，在WxPusher后台创建应用后获取
    uids:  # 用户ID列表，逗号分隔（可选，与topic_ids二选一）
    topic_ids:  # 主题ID列表，逗号分隔（可选，与uids二选一）
    content_type: 1  # 内容类型：1-文本，2-html，3-markdown，默认1

